(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{jkDv:function(t,e,i){"use strict";i.r(e);var n=i("ofXK"),o=i("tyNb"),a=i("fXoL"),c=i("M0ag"),r=i("/t3+"),s=i("bTqV");const b=function(){return["/home"]};let l=(()=>{class t{constructor(t,e){this.session=t,this.router=e}ngOnInit(){}disconnect(){this.session.doSignOut(),this.router.navigate(["/home"])}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(c.a),a.Pb(o.d))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-admin"]],decls:9,vars:2,consts:[["color","warn",1,"topbar","mat-elevation-z6"],[2,"cursor","pointer",3,"routerLink"],[1,"example-spacer"],["mat-raised-button","",3,"click"],[1,"container"]],template:function(t,e){1&t&&(a.Vb(0,"mat-toolbar",0),a.Vb(1,"mat-toolbar-row"),a.Vb(2,"span",1),a.Dc(3,"Super travel"),a.Ub(),a.Qb(4,"span",2),a.Vb(5,"button",3),a.dc("click",(function(t){return e.disconnect()})),a.Dc(6,"Se d\xe9connecter"),a.Ub(),a.Ub(),a.Ub(),a.Vb(7,"main",4),a.Qb(8,"router-outlet"),a.Ub()),2&t&&(a.Cb(2),a.nc("routerLink",a.oc(1,b)))},directives:[r.a,r.c,o.e,s.a,o.h],styles:[".example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto}"]}),t})();var u=i("3Pt+"),m=i("ukCm"),d=i("M9IT"),h=i("VRyK"),p=i("7q3A"),f=i("Wp6s"),g=i("NFeN");function D(t,e){if(1&t){const t=a.Wb();a.Vb(0,"tr"),a.Vb(1,"td"),a.Dc(2),a.Ub(),a.Vb(3,"td"),a.Dc(4),a.Ub(),a.Vb(5,"td"),a.Dc(6),a.Ub(),a.Vb(7,"td"),a.Vb(8,"button",6),a.dc("click",(function(i){a.uc(t);const n=e.$implicit;return a.hc().delete(n.id)})),a.Vb(9,"mat-icon"),a.Dc(10,"delete"),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){const t=e.$implicit;a.Cb(2),a.Ec(t.firstname),a.Cb(2),a.Ec(t.lastname),a.Cb(2),a.Ec(t.role)}}const C=function(){return["/home/list"]},U=function(){return["/home/account/new"]},w=function(){return[6,12,20]};var V=function(t){return t.LIST="LIST",t.CREATED="CREATED",t.FOLLOWED="FOLLOWED",t}({});let v=(()=>{class t{constructor(t,e){this.fb=t,this.uow=e,this.pageTitle=V.LIST,this.o=new m.e,this.resultat={},this.isLoadingResults=!1,this.resultsLength=0}ngOnInit(){this.createForm(),this.getPage(0,6,"id","desc"),Object(h.a)(this.paginator.page).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=10,this.getPage(this.paginator.pageIndex*this.paginator.pageSize,this.paginator.pageSize,"id","desc")})}getPage(t,e,i,n){this.isLoadingResults=!0,this.uow.users.getAll(t,e,i,n).subscribe(t=>{console.log(t),this.resultat=t[0],this.resultsLength=t[1]})}delete(t){this.uow.users.delete(t).subscribe(t=>{this.getPage(0,5,"id","asc")})}createForm(){this.myForm=this.fb.group({id:this.o.id,lastname:[this.o.lastname,[u.t.required]],firstname:[this.o.firstname,[u.t.required]],email:[this.o.email,[u.t.required]],password:[this.o.password,[u.t.required]],role:[this.o.role,[u.t.required]]})}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(u.d),a.Pb(p.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-users"]],viewQuery:function(t,e){var i;1&t&&a.zc(d.a,!0),2&t&&a.rc(i=a.ec())&&(e.paginator=i.first)},inputs:{pageTitle:"pageTitle"},decls:15,vars:9,consts:[[4,"ngFor","ngForOf"],[1,"actions"],["mat-button","","type","button",3,"routerLink"],["mat-raised-button","","color","primary","type","button",3,"routerLink"],[1,"mat-elevation-z8","mb-3"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],["mat-icon-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(a.Vb(0,"mat-card"),a.Vb(1,"h3"),a.Dc(2,"Liste des utilisateurs"),a.Ub(),a.Vb(3,"table"),a.Bc(4,D,11,3,"tr",0),a.Ub(),a.Vb(5,"div",1),a.Qb(6,"br"),a.Vb(7,"button",2),a.Dc(8,"Retour"),a.Ub(),a.Dc(9,"\xa0\xa0 "),a.Vb(10,"button",3),a.Dc(11,"Nouvel utilisateur"),a.Ub(),a.Dc(12,"\xa0\xa0 "),a.Ub(),a.Ub(),a.Vb(13,"div",4),a.Qb(14,"mat-paginator",5),a.Ub()),2&t&&(a.Cb(4),a.nc("ngForOf",e.resultat),a.Cb(3),a.nc("routerLink",a.oc(6,C)),a.Cb(3),a.nc("routerLink",a.oc(7,U)),a.Cb(4),a.nc("length",e.resultsLength)("pageSize",6)("pageSizeOptions",a.oc(8,w)))},directives:[f.a,n.k,s.a,o.e,d.a,g.a],styles:["mat-list-item[_ngcontent-%COMP%]:hover{background:#f1f1f1}.myrow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;width:100%}.myrow[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}table[_ngcontent-%COMP%]{width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}th.mat-header-cell[_ngcontent-%COMP%]{text-align:left;max-width:300px}"]}),t})();var k=i("mrSG"),y=i("0IaG"),x=i("f0Cb"),O=i("kmnG"),P=i("qFsG"),L=i("d3UM"),S=i("FKr1");function M(t,e){if(1&t&&(a.Vb(0,"mat-option",17),a.Dc(1),a.Ub()),2&t){const t=e.$implicit;a.nc("value",t),a.Cb(1),a.Ec(t)}}let N=(()=>{class t{constructor(t,e,i,n){this.dialogRef=t,this.data=e,this.fb=i,this.uow=n,this.title="",this.roles=["user","admin"],this.hide=!0}ngOnInit(){this.o=this.data.model,this.title=this.data.title,this.createForm()}onNoClick(){this.dialogRef.close()}onOkClick(t){this.dialogRef.close(t)}createForm(){this.myForm=this.fb.group({id:this.o.id,firstname:[this.o.firstname,u.t.required],lastname:[this.o.lastname,u.t.required],email:[this.o.email,[u.t.required,u.t.email]],password:[this.o.password,u.t.required],role:[this.o.role,u.t.required]})}resetForm(){this.o=new m.e,this.createForm()}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(y.g),a.Pb(y.a),a.Pb(u.d),a.Pb(p.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-update"]],decls:39,vars:8,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","firstname","required",""],["matInput","","formControlName","lastname","required",""],["matInput","","formControlName","email","required",""],["matInput","","formControlName","password","required","",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["formControlName","role"],[3,"value",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Vb(2,"mat-toolbar",2),a.Vb(3,"span"),a.Dc(4),a.Ub(),a.Ub(),a.Qb(5,"mat-divider"),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"div",4),a.Vb(8,"form",5),a.Vb(9,"mat-form-field",6),a.Vb(10,"mat-label"),a.Dc(11,"Nom"),a.Ub(),a.Qb(12,"input",7),a.Ub(),a.Vb(13,"mat-form-field",6),a.Vb(14,"mat-label"),a.Dc(15,"Pr\xe9nom"),a.Ub(),a.Qb(16,"input",8),a.Ub(),a.Vb(17,"mat-form-field",6),a.Vb(18,"mat-label"),a.Dc(19,"Email"),a.Ub(),a.Qb(20,"input",9),a.Ub(),a.Vb(21,"mat-form-field",6),a.Vb(22,"mat-label"),a.Dc(23,"Mot de passe"),a.Ub(),a.Qb(24,"input",10),a.Vb(25,"button",11),a.dc("click",(function(t){return e.hide=!e.hide})),a.Vb(26,"mat-icon"),a.Dc(27),a.Ub(),a.Ub(),a.Ub(),a.Vb(28,"mat-form-field",6),a.Vb(29,"mat-label"),a.Dc(30,"Role"),a.Ub(),a.Vb(31,"mat-select",12),a.Bc(32,M,2,2,"mat-option",13),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(33,"div",14),a.Vb(34,"button",15),a.dc("click",(function(t){return e.onNoClick()})),a.Dc(35,"Annuler"),a.Ub(),a.Dc(36,"\xa0\xa0 "),a.Vb(37,"button",16),a.dc("click",(function(t){return e.onOkClick(e.myForm.value)})),a.Dc(38,"Enregistrer"),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Cb(4),a.Ec(e.title),a.Cb(4),a.nc("formGroup",e.myForm),a.Cb(16),a.nc("type",e.hide?"password":"text"),a.Cb(1),a.Db("aria-label","Hide password")("aria-pressed",e.hide),a.Cb(2),a.Ec(e.hide?"visibility_off":"visibility"),a.Cb(5),a.nc("ngForOf",e.roles),a.Cb(5),a.nc("disabled",e.myForm.invalid))},directives:[y.h,r.a,x.a,y.e,u.u,u.o,u.h,O.b,O.e,P.b,u.b,u.n,u.g,u.s,s.a,O.f,g.a,L.a,n.k,y.c,S.o],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}"]}),t})();var F=i("Dh3D"),E=i("hUFt"),I=i("+0xr"),R=i("Xa2L"),T=i("Qu3c");function z(t,e){1&t&&a.Qb(0,"mat-spinner")}function _(t,e){if(1&t&&(a.Vb(0,"div",18),a.Bc(1,z,1,0,"mat-spinner",19),a.Ub()),2&t){const t=a.hc();a.Cb(1),a.nc("ngIf",t.isLoadingResults)}}function Q(t,e){if(1&t&&(a.Vb(0,"th",20),a.Dc(1),a.Ub()),2&t){const t=a.hc();a.Cb(1),a.Ec(t.columnDefs[0].headName)}}function B(t,e){if(1&t&&(a.Vb(0,"td",21),a.Dc(1),a.Ub()),2&t){const t=e.$implicit,i=a.hc();a.Cb(1),a.Ec(t[i.columnDefs[0].columnDef])}}function q(t,e){if(1&t&&(a.Vb(0,"th",22),a.Dc(1),a.Ub()),2&t){const t=a.hc();a.Cb(1),a.Ec(t.columnDefs[1].headName)}}function j(t,e){if(1&t&&(a.Vb(0,"td",21),a.Dc(1),a.Ub()),2&t){const t=e.$implicit,i=a.hc();a.Cb(1),a.Ec(t[i.columnDefs[1].columnDef])}}function $(t,e){if(1&t&&(a.Vb(0,"th",22),a.Dc(1),a.Ub()),2&t){const t=a.hc();a.Cb(1),a.Ec(t.columnDefs[2].headName)}}function A(t,e){if(1&t&&(a.Vb(0,"td",21),a.Dc(1),a.Ub()),2&t){const t=e.$implicit,i=a.hc();a.Cb(1),a.Ec(t[i.columnDefs[2].columnDef])}}function G(t,e){if(1&t&&(a.Vb(0,"th",22),a.Dc(1),a.Ub()),2&t){const t=a.hc();a.Cb(1),a.Ec(t.columnDefs[3].headName)}}function J(t,e){if(1&t&&(a.Vb(0,"td",21),a.Dc(1),a.Ub()),2&t){const t=e.$implicit,i=a.hc();a.Cb(1),a.Ec(t[i.columnDefs[3].columnDef])}}function H(t,e){1&t&&a.Qb(0,"th",22)}const W=function(t){return["/home/created",t]},K=function(t){return["/home/followed",t]};function X(t,e){if(1&t){const t=a.Wb();a.Vb(0,"td",21),a.Vb(1,"div",23),a.Vb(2,"button",24),a.Vb(3,"mat-icon"),a.Dc(4,"add"),a.Ub(),a.Ub(),a.Vb(5,"button",25),a.Vb(6,"mat-icon"),a.Dc(7,"thumb_up"),a.Ub(),a.Ub(),a.Vb(8,"button",26),a.dc("click",(function(i){a.uc(t);const n=e.$implicit;return a.hc().edit(n)})),a.Vb(9,"mat-icon"),a.Dc(10,"create"),a.Ub(),a.Ub(),a.Vb(11,"button",27),a.dc("click",(function(i){a.uc(t);const n=e.$implicit;return a.hc().delete(n.id)})),a.Vb(12,"mat-icon"),a.Dc(13,"delete_sweep"),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){const t=e.$implicit;a.Cb(2),a.nc("routerLink",a.pc(2,W,t.id)),a.Cb(3),a.nc("routerLink",a.pc(4,K,t.id))}}function Y(t,e){1&t&&a.Qb(0,"tr",28)}function Z(t,e){1&t&&a.Qb(0,"tr",29)}const tt=function(){return[5,10,25,50,100,250]},et=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:l,children:[{path:"",redirectTo:"user",pathMatch:"full"},{path:"users",component:v},{path:"user",component:(()=>{class t{constructor(t,e,i){this.uow=t,this.dialog=e,this.mydialog=i,this.update=new a.o,this.isLoadingResults=!0,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"firstname",headName:"nom"},{columnDef:"lastname",headName:"prenom"},{columnDef:"email",headName:""},{columnDef:"role",headName:""},{columnDef:"option",headName:"OPTION"}].map(t=>(t.headName=""===t.headName?t.columnDef.toUpperCase():t.headName.toUpperCase(),t)),this.displayedColumns=this.columnDefs.map(t=>t.columnDef)}ngOnInit(){this.getPage(0,5,"id","desc"),Object(h.a)(this.sort.sortChange,this.paginator.page,this.update).subscribe(t=>{!0===t?this.paginator.pageIndex=0:t=t,this.paginator.pageSize?t=t:this.paginator.pageSize=5;const e=this.paginator.pageIndex*this.paginator.pageSize;this.isLoadingResults=!0,this.getPage(e,this.paginator.pageSize,this.sort.active?this.sort.active:"id",this.sort.direction?this.sort.direction:"desc")})}getPage(t,e,i,n){this.uow.users.getList(t,e,i,n).subscribe(t=>{console.log(t[0]),this.dataSource=t[0],this.resultsLength=t[1],this.isLoadingResults=!1})}openDialog(t,e){return this.dialog.open(N,{width:"750px",disableClose:!0,data:{model:t,title:e}}).afterClosed()}add(){this.openDialog(new m.e,"Ajouter un utilisateur").subscribe(t=>{t&&this.uow.users.post(t).subscribe(t=>{this.update.next(!0)})})}edit(t){this.openDialog(t,"Modifier un utilisateur").subscribe(t=>{t&&this.uow.users.put(t.id,t).subscribe(t=>{this.update.next(!0)})})}delete(t){return Object(k.a)(this,void 0,void 0,(function*(){"ok"===(yield this.mydialog.openDialog("Utilisateur").toPromise())&&this.uow.users.delete(t).subscribe(()=>this.update.next(!0))}))}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(p.a),a.Pb(y.b),a.Pb(E.a))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-user"]],viewQuery:function(t,e){var i;1&t&&(a.zc(d.a,!0),a.zc(F.a,!0)),2&t&&(a.rc(i=a.ec())&&(e.paginator=i.first),a.rc(i=a.ec())&&(e.sort=i.first))},decls:34,vars:11,consts:[[1,"host"],[2,"margin-bottom","15px"],[1,"right"],["mat-raised-button","","color","primary",1,"mt-3",2,"margin","20px 0",3,"click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","5","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"button-row"],["matTooltip","ses parcours cr\xe9\xe9s","mat-icon-button","","color","primary",3,"routerLink"],["matTooltip","ses parcours suivis","mat-icon-button","","color","primary",3,"routerLink"],["matTooltip","modifier","mat-icon-button","","color","accent",3,"click"],["matTooltip","supprimer","mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"section",1),a.Vb(2,"h3"),a.Dc(3,"Utilisateurs"),a.Ub(),a.Ub(),a.Qb(4,"mat-divider"),a.Vb(5,"div",2),a.Vb(6,"button",3),a.dc("click",(function(t){return e.add()})),a.Vb(7,"mat-icon"),a.Dc(8,"add"),a.Ub(),a.Dc(9," Utilisateurs "),a.Ub(),a.Ub(),a.Vb(10,"div",4),a.Bc(11,_,2,1,"div",5),a.Vb(12,"div",6),a.Vb(13,"table",7,8),a.Tb(15,9),a.Bc(16,Q,2,1,"th",10),a.Bc(17,B,2,1,"td",11),a.Sb(),a.Tb(18,9),a.Bc(19,q,2,1,"th",12),a.Bc(20,j,2,1,"td",11),a.Sb(),a.Tb(21,9),a.Bc(22,$,2,1,"th",12),a.Bc(23,A,2,1,"td",11),a.Sb(),a.Tb(24,9),a.Bc(25,G,2,1,"th",12),a.Bc(26,J,2,1,"td",11),a.Sb(),a.Tb(27,13),a.Bc(28,H,1,0,"th",12),a.Bc(29,X,14,6,"td",11),a.Sb(),a.Bc(30,Y,1,0,"tr",14),a.Bc(31,Z,1,0,"tr",15),a.Ub(),a.Ub(),a.Qb(32,"mat-paginator",16,17),a.Ub(),a.Ub()),2&t&&(a.Cb(11),a.nc("ngIf",e.isLoadingResults),a.Cb(2),a.nc("dataSource",e.dataSource),a.Cb(2),a.nc("matColumnDef",e.columnDefs[0].columnDef),a.Cb(3),a.nc("matColumnDef",e.columnDefs[1].columnDef),a.Cb(3),a.nc("matColumnDef",e.columnDefs[2].columnDef),a.Cb(3),a.nc("matColumnDef",e.columnDefs[3].columnDef),a.Cb(6),a.nc("matHeaderRowDef",e.displayedColumns),a.Cb(1),a.nc("matRowDefColumns",e.displayedColumns),a.Cb(1),a.nc("length",e.resultsLength)("pageSizeOptions",a.oc(10,tt)))},directives:[x.a,s.a,g.a,n.l,I.j,F.a,I.c,I.e,I.b,I.g,I.i,d.a,R.b,I.d,F.b,I.a,T.a,o.e,I.f,I.h],styles:[".host[_ngcontent-%COMP%]{margin:1em!important}"]}),t})()}]}];let it=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[o.g.forChild(et)],o.g]}),t})();var nt=i("tk/3"),ot=i("2thQ");i.d(e,"AdminModule",(function(){return at}));let at=(()=>{class t{}return t.\u0275mod=a.Nb({type:t}),t.\u0275inj=a.Mb({factory:function(e){return new(e||t)},imports:[[n.c,it,u.j,u.r,nt.c,ot.a]]}),t})()}}]);