function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Yj9t:function(e,t,n){"use strict";n.r(t);var i,r,o,a=n("ofXK"),c=n("tyNb"),s=n("mrSG"),l=n("3Pt+"),u=n("ukCm"),b=n("fXoL"),m=n("7q3A"),d=n("M0ag"),f=n("dNgK"),p=n("Xa2L"),h=((r=function(){function e(t){var n=this;_classCallCheck(this,e),this.snackBar=t,this.afterDismissed=function(){return n.snackBarRef.afterDismissed()},this.onAction=function(){return n.snackBarRef.onAction()},this.dismiss=function(){return n.snackBarRef.dismiss()}}return _createClass(e,[{key:"openMySnackBar",value:function(e,t){this.snackBarRef=this.snackBar.openFromComponent(g,{panelClass:["customClass"],data:e})}},{key:"openSnackBar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"close";this.snackBarRef=this.snackBar.open(e,t,{duration:1e4})}}]),e}()).\u0275fac=function(e){return new(e||r)(b.Zb(f.b))},r.\u0275prov=b.Lb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),g=((i=function e(t){_classCallCheck(this,e),this.data=t}).\u0275fac=function(e){return new(e||i)(b.Pb(f.a))},i.\u0275cmp=b.Jb({type:i,selectors:[["app-snack-bar"]],decls:4,vars:1,consts:[[1,"row"],["color","warn","diameter","27",1,"custom-spinner"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.Vb(1,"p"),b.Dc(2),b.Ub(),b.Qb(3,"mat-spinner",1),b.Ub()),2&e&&(b.Cb(2),b.Ec(t.data))},directives:[p.b],styles:[".row[_ngcontent-%COMP%] {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }"]}),i),k=n("pLZG"),y=n("Zy1z"),w=n("lJxs"),v=((o=function(){function e(t){_classCallCheck(this,e),this.router=t,this.previousUrl="/home",this.last2()}return _createClass(e,[{key:"last",value:function(){return this.router.events.pipe(Object(k.a)((function(e){return e instanceof c.i})),Object(y.a)(),Object(w.a)((function(e){return"".concat(window.origin).concat(e[0].urlAfterRedirects)}))).toPromise()}},{key:"last2",value:function(){var e=this;this.router.events.pipe(Object(k.a)((function(e){return e instanceof c.i})),Object(y.a)()).subscribe((function(t){e.previousUrl="".concat(t[0].urlAfterRedirects),console.log(e.previousUrl)}))}}]),e}()).\u0275fac=function(e){return new(e||o)(b.Zb(c.d))},o.\u0275prov=b.Lb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),C=n("Wp6s"),x=n("kmnG"),P=n("qFsG"),_=n("NFeN"),U=n("bTqV");function V(e,t){1&e&&(b.Vb(0,"mat-error"),b.Dc(1,"Email non valide"),b.Ub())}var O,M=function(){return["/auth/create"]},F=((O=function(){function e(t,n,i,r,o,a){_classCallCheck(this,e),this.fb=t,this.uow=n,this.router=i,this.session=r,this.snackbar=o,this.route=a,this.displayedColumns=["email","password","profil"],this.dataSource=[{email:"mourabit@angular.io",password:"123",profil:"Administrateur"},{email:"mehdi@angular.io",password:"123",profil:"Central"},{email:"soufiane@angular.io",password:"123",profil:"Point focal"},{email:"ahmed@angular.io",password:"123",profil:"Metier"}],this.o=new u.e,this.hide=!0,this.previousUrl="".concat(window.origin,"/home")}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.o.email="admin@angular.io",this.o.password="123",this.createForm();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"createForm",value:function(){this.myForm=this.fb.group({email:[this.o.email,[l.t.required,l.t.email]],password:[this.o.password,[l.t.required]]})}},{key:"submit",value:function(e){var t=this;this.uow.accounts.login(e).subscribe((function(e){return Object(s.a)(t,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.session.doSignIn(e.user,e.token),this.router.navigate(["/home"]);case 1:case"end":return t.stop()}}),t,this)})))}))}},{key:"resetForm",value:function(){this.o=new u.e,this.createForm()}},{key:"ngOnDestroy",value:function(){console.log("ngOnDestroy")}},{key:"email",get:function(){return this.myForm.get("email")}},{key:"password",get:function(){return this.myForm.get("password")}},{key:"emailError",get:function(){return this.email.hasError("required")?"Vous devez entrer une valeur":this.email.hasError("email")?"Email invalide":""}},{key:"passwordError",get:function(){return this.password.hasError("required")?"Vous devez entrer une valeur":""}}]),e}()).\u0275fac=function(e){return new(e||O)(b.Pb(l.d),b.Pb(m.a),b.Pb(c.d),b.Pb(d.a),b.Pb(h),b.Pb(v))},O.\u0275cmp=b.Jb({type:O,selectors:[["app-login"]],decls:24,vars:6,consts:[[1,"flex-container"],[1,"flex-item","mat-elevation-z8"],[3,"formGroup","ngSubmit"],[1,"systeme"],[1,"example-container","mtb-2","text-center"],["appearance","fill"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","accent","type","button",3,"routerLink"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.Vb(1,"mat-card",1),b.Vb(2,"form",2),b.dc("ngSubmit",(function(e){return t.submit(t.myForm.value)})),b.Vb(3,"mat-card-content"),b.Vb(4,"p",3),b.Dc(5,"Bienvenue"),b.Ub(),b.Vb(6,"div",4),b.Vb(7,"mat-form-field",5),b.Vb(8,"mat-label"),b.Dc(9,"Email"),b.Ub(),b.Qb(10,"input",6),b.Bc(11,V,2,0,"mat-error",7),b.Ub(),b.Vb(12,"mat-form-field",5),b.Vb(13,"mat-label"),b.Dc(14,"Mot de passe"),b.Ub(),b.Qb(15,"input",8),b.Vb(16,"mat-icon",9),b.dc("click",(function(e){return t.hide=!t.hide})),b.Dc(17),b.Ub(),b.Ub(),b.Qb(18,"br"),b.Vb(19,"button",10),b.Dc(20,"Se connecter"),b.Ub(),b.Qb(21,"br"),b.Vb(22,"button",11),b.Dc(23,"Cr\xe9er un compte"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e&&(b.Cb(2),b.nc("formGroup",t.myForm),b.Cb(9),b.nc("ngIf",t.myForm.get("email").invalid),b.Cb(4),b.nc("type",t.hide?"password":"text"),b.Cb(2),b.Fc("",t.hide?"visibility_off":"visibility"," "),b.Cb(5),b.nc("routerLink",b.oc(5,M)))},directives:[C.a,l.u,l.o,l.h,C.c,x.b,x.e,P.b,l.b,l.n,l.g,a.l,_.a,x.f,U.a,c.e,x.a],styles:[".flex-container[_ngcontent-%COMP%]{background:url(travel.1c21e09476b296b811a4.png) no-repeat;background-size:cover;background-position:50%;padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.flex-item[_ngcontent-%COMP%]{background-color:#fff;height:auto;width:450px;min-width:200px;line-height:20px;font-weight:700;font-size:2em;text-align:center;margin:15px;display:inline-block;border-radius:0}.example-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.img1[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;background-size:cover;height:100%}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{width:auto!important;padding-right:0!important}.logo[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.systeme[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:25px 0 50px;line-height:30px}"]}),O);function D(e,t){1&e&&(b.Vb(0,"mat-error"),b.Dc(1,"Email non valid\xe9"),b.Ub())}var E,j,I,q=function(){return["/auth/login"]},N=((E=function(){function e(t,n,i,r,o){_classCallCheck(this,e),this.fb=t,this.uow=n,this.router=i,this.session=r,this.snackbar=o,this.o=new u.e,this.hide=!0}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.createForm();case 1:case"end":return e.stop()}}),e,this)})))}},{key:"createForm",value:function(){this.myForm=this.fb.group({firstname:[this.o.firstname,[l.t.required]],lastname:[this.o.lastname,[l.t.required]],email:[this.o.email,[l.t.required,l.t.email]],password:[this.o.password,[l.t.required]],role:[this.o.role,[l.t.required]]})}},{key:"submit",value:function(e){var t=this;this.uow.accounts.create(e).subscribe((function(e){t.router.navigate(["/auth/login"])}))}},{key:"resetForm",value:function(){this.o=new u.e,this.createForm()}},{key:"email",get:function(){return this.myForm.get("email")}},{key:"password",get:function(){return this.myForm.get("password")}},{key:"emailError",get:function(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}},{key:"passwordError",get:function(){return this.password.hasError("required")?"You must enter a value":""}}]),e}()).\u0275fac=function(e){return new(e||E)(b.Pb(l.d),b.Pb(m.a),b.Pb(c.d),b.Pb(d.a),b.Pb(h))},E.\u0275cmp=b.Jb({type:E,selectors:[["app-create"]],decls:32,vars:6,consts:[[1,"flex-container"],[1,"flex-item","mat-elevation-z8"],[3,"formGroup","ngSubmit"],[1,"systeme"],[1,"example-container","mtb-2","text-center"],["appearance","fill"],["matInput","","formControlName","firstname"],["matInput","","formControlName","lastname"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["mat-raised-button","","color","accent","type","submit"],["mat-raised-button","","color","primary","type","button",3,"routerLink"]],template:function(e,t){1&e&&(b.Vb(0,"div",0),b.Vb(1,"mat-card",1),b.Vb(2,"form",2),b.dc("ngSubmit",(function(e){return t.submit(t.myForm.value)})),b.Vb(3,"mat-card-content"),b.Vb(4,"p",3),b.Dc(5,"S'enregistrer"),b.Ub(),b.Vb(6,"div",4),b.Vb(7,"mat-form-field",5),b.Vb(8,"mat-label"),b.Dc(9,"Pr\xe9nom"),b.Ub(),b.Qb(10,"input",6),b.Ub(),b.Vb(11,"mat-form-field",5),b.Vb(12,"mat-label"),b.Dc(13,"Nom"),b.Ub(),b.Qb(14,"input",7),b.Ub(),b.Vb(15,"mat-form-field",5),b.Vb(16,"mat-label"),b.Dc(17,"Email"),b.Ub(),b.Qb(18,"input",8),b.Bc(19,D,2,0,"mat-error",9),b.Ub(),b.Vb(20,"mat-form-field",5),b.Vb(21,"mat-label"),b.Dc(22,"Mot de passe"),b.Ub(),b.Qb(23,"input",10),b.Vb(24,"mat-icon",11),b.dc("click",(function(e){return t.hide=!t.hide})),b.Dc(25),b.Ub(),b.Ub(),b.Qb(26,"br"),b.Vb(27,"button",12),b.Dc(28,"Cr\xe9er"),b.Ub(),b.Qb(29,"br"),b.Vb(30,"button",13),b.Dc(31,"Se connecter"),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub(),b.Ub()),2&e&&(b.Cb(2),b.nc("formGroup",t.myForm),b.Cb(17),b.nc("ngIf",t.myForm.get("email").invalid),b.Cb(4),b.nc("type",t.hide?"password":"text"),b.Cb(2),b.Fc("",t.hide?"visibility_off":"visibility"," "),b.Cb(5),b.nc("routerLink",b.oc(5,q)))},directives:[C.a,l.u,l.o,l.h,C.c,x.b,x.e,P.b,l.b,l.n,l.g,a.l,_.a,x.f,U.a,c.e,x.a],styles:[".flex-container[_ngcontent-%COMP%]{background:url(travel.1c21e09476b296b811a4.png) no-repeat;background-size:cover;background-position:50%;padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.flex-item[_ngcontent-%COMP%]{background-color:#fff;height:auto;width:450px;min-width:200px;line-height:20px;font-weight:700;font-size:2em;text-align:center;margin:15px;display:inline-block;border-radius:0}.example-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.img1[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;background-size:cover;height:100%}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{width:auto!important;padding-right:0!important}.logo[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.systeme[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:25px 0 50px;line-height:30px}"]}),E),S=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:(j=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}(),j.\u0275fac=function(e){return new(e||j)},j.\u0275cmp=b.Jb({type:j,selectors:[["app-auth"]],decls:1,vars:0,template:function(e,t){1&e&&b.Qb(0,"router-outlet")},directives:[c.h],styles:[""]}),j),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:F},{path:"create",component:N}]}],z=((I=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:I}),I.\u0275inj=b.Mb({factory:function(e){return new(e||I)},imports:[[c.g.forChild(S)],c.g]}),I),B=n("tk/3"),Q=n("2thQ");n.d(t,"AuthModule",(function(){return L}));var R,L=((R=function e(){_classCallCheck(this,e)}).\u0275mod=b.Nb({type:R}),R.\u0275inj=b.Mb({factory:function(e){return new(e||R)},imports:[[a.c,z,l.j,l.r,B.c,Q.a]]}),R)}}]);