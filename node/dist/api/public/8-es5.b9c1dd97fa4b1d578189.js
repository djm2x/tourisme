function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function _iterableToArrayLimit(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"ct+p":function(t,e,n){"use strict";n.r(e);var i,r=n("ofXK"),o=n("tyNb"),a=n("fXoL"),s=n("3Pt+"),c=n("VRyK"),u=n("M9IT"),l=n("0IaG"),d=n("/t3+"),h=n("f0Cb"),p=n("bTqV"),b=((i=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.model=""}return _createClass(t,[{key:"ngOnInit",value:function(){this.model=this.data.model}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onOkClick",value:function(){this.dialogRef.close("ok")}}]),t}()).\u0275fac=function(t){return new(t||i)(a.Pb(l.g),a.Pb(l.a))},i.\u0275cmp=a.Jb({type:i,selectors:[["app-delete"]],decls:15,vars:1,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-button","","color","primary","type","button","cdkFocusInitial","",3,"mat-dialog-close","click"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Vb(2,"mat-toolbar",2),a.Vb(3,"span"),a.Bc(4),a.Ub(),a.Ub(),a.Qb(5,"mat-divider"),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"div",4),a.Vb(8,"p"),a.Bc(9,"Voulez-vous vraiment supprimer?"),a.Ub(),a.Ub(),a.Vb(10,"div",5),a.Vb(11,"button",6),a.dc("click",(function(t){return e.onNoClick()})),a.Bc(12,"Annuler"),a.Ub(),a.Vb(13,"button",7),a.dc("click",(function(t){return e.onOkClick()})),a.Bc(14,"Ok"),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Cb(4),a.Dc("Suppression ",e.model," "))},directives:[l.h,d.a,h.a,l.e,l.c,p.a,l.d],styles:[".dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}"]}),i),f=n("7q3A"),m=n("Wp6s"),g=n("kmnG"),v=n("qFsG"),k=n("NFeN"),y=function(t){return["/home/detail",t]},_=function(t){return["/home/update",t]};function C(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",10),a.Vb(1,"mat-card"),a.Vb(2,"p"),a.Bc(3),a.Ub(),a.Vb(4,"div",11),a.Qb(5,"img",12),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"p"),a.Bc(8),a.Ub(),a.Vb(9,"div"),a.Vb(10,"button",13),a.Vb(11,"mat-icon"),a.Bc(12,"create"),a.Ub(),a.Ub(),a.Vb(13,"button",14),a.dc("click",(function(t){a.tc(n);var i=e.$implicit;return a.hc().delete(i.id)})),a.Vb(14,"mat-icon"),a.Bc(15,"delete_sweep"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub()}if(2&t){var i=e.$implicit;a.Cb(3),a.Cc(i.titre),a.Cb(1),a.mc("routerLink",a.oc(5,y,i.id)),a.Cb(1),a.mc("src",i.image,a.vc),a.Cb(3),a.Cc(i.temps),a.Cb(2),a.mc("routerLink",a.oc(7,_,i.id))}}var w,O,P,x,M,V,I=function(){return[6,12,20]},U=function(t){return t.LIST="LIST",t.CREATED="CREATED",t.FOLLOWED="FOLLOWED",t}({}),z=((P=function(){function t(e,n){_classCallCheck(this,t),this.uow=e,this.dialog=n,this.pageTitle=U.LIST,this.update=new a.o,this.resultsLength=0,this.list=[],this.filter=new s.e(""),this.linkImage="../../assets/link.png"}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.get(0,6,""),Object(c.a)(this.paginator.page,this.update).subscribe((function(e){!0===e?t.paginator.pageIndex=0:e=e,t.paginator.pageSize?e=e:t.paginator.pageSize=10,t.get(t.paginator.pageIndex*t.paginator.pageSize,t.paginator.pageSize,t.filter?t.filter.value:"")}))}},{key:"get",value:function(t,e,n){var i=this;n=""===n?null:n,this.pageTitle===U.LIST?this.uow.parcours.getAll(t,e,n).subscribe((function(t){i.list=t[0],i.resultsLength=t[1],console.log(t)})):this.pageTitle===U.CREATED?this.uow.parcours.getCreated(t,e,n).subscribe((function(t){i.list=t[0],i.resultsLength=t[1],console.log(t)})):this.uow.parcours.getFollowed(t,e,n).subscribe((function(t){i.list=t[0],i.resultsLength=t[1],console.log(t)}))}},{key:"search",value:function(){this.update.next(!0)}},{key:"reset",value:function(){this.filter.setValue(""),this.update.next(!0)}},{key:"delete",value:function(t){var e=this;this.dialog.open(b,{width:"500px"}).afterClosed().subscribe((function(n){n&&e.uow.parcours.delete(t).subscribe((function(t){e.update.next(!1)}))}))}}]),t}()).\u0275fac=function(t){return new(t||P)(a.Pb(f.a),a.Pb(l.b))},P.\u0275cmp=a.Jb({type:P,selectors:[["app-shared"]],viewQuery:function(t,e){var n;1&t&&a.yc(u.a,!0),2&t&&a.qc(n=a.ec())&&(e.paginator=n.first)},inputs:{pageTitle:"pageTitle"},decls:19,vars:6,consts:[[1,"myrow"],[2,"width","70%"],["matInput","","required","",3,"formControl"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"],["mat-raised-button","",3,"click"],[1,"row","justify-content-center","mb-5"],["class","col-sm-6 col-md-4 ",4,"ngFor","ngForOf"],[1,"mat-elevation-z8","mb-3"],["showFirstLastButtons","",3,"length","pageSize","pageSizeOptions"],[1,"col-sm-6","col-md-4"],[1,"col-md-12",3,"routerLink"],["height","180px",3,"src"],["mat-icon-button","","color","primary",3,"routerLink"],["mat-icon-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(a.Vb(0,"mat-card"),a.Vb(1,"div",0),a.Vb(2,"mat-form-field",1),a.Vb(3,"mat-label"),a.Bc(4,"Nom de recette"),a.Ub(),a.Qb(5,"input",2),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"button",4),a.dc("click",(function(t){return e.search()})),a.Vb(8,"mat-icon"),a.Bc(9,"search"),a.Ub(),a.Ub(),a.Bc(10," \xa0 "),a.Vb(11,"button",5),a.dc("click",(function(t){return e.reset()})),a.Vb(12,"mat-icon"),a.Bc(13,"refresh"),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Qb(14,"hr"),a.Vb(15,"div",6),a.Ac(16,C,16,9,"div",7),a.Ub(),a.Vb(17,"div",8),a.Qb(18,"mat-paginator",9),a.Ub()),2&t&&(a.Cb(5),a.mc("formControl",e.filter),a.Cb(11),a.mc("ngForOf",e.list),a.Cb(2),a.mc("length",e.resultsLength)("pageSize",6)("pageSizeOptions",a.nc(5,I)))},directives:[m.a,g.b,g.e,v.b,s.b,s.s,s.n,s.f,p.a,k.a,r.j,u.a,o.e],styles:["mat-card[_ngcontent-%COMP%]{text-align:center;margin-top:10px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:pointer}.myrow[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%], .myrow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.actions[_ngcontent-%COMP%]{margin-top:10px}.actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;margin:0}"]}),P),A=((O=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||O)},O.\u0275cmp=a.Jb({type:O,selectors:[["app-list"]],decls:1,vars:0,consts:[["pageTitle","LIST"]],template:function(t,e){1&t&&a.Qb(0,"app-shared",0)},directives:[z],styles:["mat-card[_ngcontent-%COMP%]{text-align:center;margin-top:10px}mat-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;cursor:pointer}.myrow[_ngcontent-%COMP%]{flex-wrap:wrap}.actions[_ngcontent-%COMP%], .myrow[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center}.actions[_ngcontent-%COMP%]{margin-top:10px}.actions[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9em;margin:0}"]}),O),D=((w=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||w)},w.\u0275cmp=a.Jb({type:w,selectors:[["app-created"]],decls:1,vars:0,consts:[["pageTitle","CREATED"]],template:function(t,e){1&t&&a.Qb(0,"app-shared",0)},directives:[z],styles:[""]}),w),B=n("M0ag"),L=n("STbY"),T=function(){return["/home"]},S=function(){return["/home/update",0]},W=function(){return["/home/created"]},R=function(){return["/home/followed"]},E=function(){return["/home/account"]},j=function(){return["/admin"]},F=((x=function(){function t(e,n){_classCallCheck(this,t),this.session=e,this.router=n}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"disconnect",value:function(){this.session.doSignOut(),this.router.navigate(["/auth/login"])}}]),t}()).\u0275fac=function(t){return new(t||x)(a.Pb(B.a),a.Pb(o.d))},x.\u0275cmp=a.Jb({type:x,selectors:[["app-home"]],decls:24,vars:14,consts:[["color","primary"],[2,"cursor","pointer",3,"routerLink"],[1,"example-spacer"],["mat-raised-button","",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","","routerLinkActive","router-link-active",3,"routerLink"],["mat-menu-item","",3,"click"],["mat-raised-button","",3,"routerLink"],[1,"container"]],template:function(t,e){if(1&t&&(a.Vb(0,"mat-toolbar",0),a.Vb(1,"mat-toolbar-row"),a.Vb(2,"span",1),a.Bc(3,"Super travel"),a.Ub(),a.Qb(4,"span",2),a.Vb(5,"button",3),a.Bc(6),a.Ub(),a.Vb(7,"mat-menu",null,4),a.Vb(9,"button",5),a.Bc(10,"Ajouter Parcours"),a.Ub(),a.Vb(11,"button",5),a.Bc(12,"Mes Parcours cree"),a.Ub(),a.Vb(13,"button",5),a.Bc(14,"Mes Parcours suivi"),a.Ub(),a.Vb(15,"button",5),a.Bc(16,"Mon compte"),a.Ub(),a.Vb(17,"button",6),a.dc("click",(function(t){return e.disconnect()})),a.Bc(18,"Deconnecter"),a.Ub(),a.Ub(),a.Bc(19," \xa0\xa0 "),a.Vb(20,"button",7),a.Bc(21,"Admin"),a.Ub(),a.Ub(),a.Ub(),a.Vb(22,"main",8),a.Qb(23,"router-outlet"),a.Ub()),2&t){var n=a.rc(8);a.Cb(2),a.mc("routerLink",a.nc(8,T)),a.Cb(3),a.mc("matMenuTriggerFor",n),a.Cb(1),a.Cc(e.session.user.firstname),a.Cb(3),a.mc("routerLink",a.nc(9,S)),a.Cb(2),a.mc("routerLink",a.nc(10,W)),a.Cb(2),a.mc("routerLink",a.nc(11,R)),a.Cb(2),a.mc("routerLink",a.nc(12,E)),a.Cb(5),a.mc("routerLink",a.nc(13,j))}},directives:[d.a,d.c,o.e,p.a,L.c,L.d,L.a,o.f,o.h],styles:[".example-icon[_ngcontent-%COMP%]{padding:0 14px}.example-spacer[_ngcontent-%COMP%]{-webkit-box-flex:1;flex:1 1 auto}"]}),x),N=n("t7Pc"),Q=((M=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||M)},M.\u0275cmp=a.Jb({type:M,selectors:[["app-followed"]],decls:1,vars:0,consts:[["pageTitle","FOLLOWED"]],template:function(t,e){1&t&&a.Qb(0,"app-shared",0)},directives:[z],styles:[""]}),M),Z=n("mrSG"),q=n("ukCm"),$=n("0kbX"),H=((V=function(){function t(){_classCallCheck(this,t),this.title="Pas sp\xe9cifi\xe9"}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||V)},V.\u0275cmp=a.Jb({type:V,selectors:[["app-title"]],inputs:{title:"title"},decls:4,vars:1,consts:[[2,"margin-bottom","15px"]],template:function(t,e){1&t&&(a.Vb(0,"section",0),a.Vb(1,"h3"),a.Bc(2),a.Ub(),a.Ub(),a.Qb(3,"mat-divider")),2&t&&(a.Cb(2),a.Cc(e.title))},directives:[h.a],styles:["section[_ngcontent-%COMP%]{display:-webkit-box!important;display:flex!important;-webkit-box-pack:justify!important;justify-content:space-between!important;-webkit-box-align:center!important;align-items:center!important}"]}),V),J=n("HDdC"),G=n("2Vo4"),X=n("Cfvw"),K=n("PqYM"),Y=(n("XNiG"),n("DH7j")),tt=n("n6bG"),et=n("lJxs"),nt=n("jtHE");n("quSY"),n("8Qeq"),n("z+Ro"),n("LRne"),n("z6cu");var it=n("5+tZ"),rt=n("l7GE"),ot=n("ZUHj"),at=function(){function t(e){_classCallCheck(this,t),this.notifier=e}return _createClass(t,[{key:"call",value:function(t,e){var n=new st(t),i=e.subscribe(n);return i.add(Object(ot.a)(n,this.notifier)),i}}]),t}(),st=function(t){function e(){var t;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).apply(this,arguments))).hasValue=!1,t}return _inherits(e,t),_createClass(e,[{key:"_next",value:function(t){this.value=t,this.hasValue=!0}},{key:"notifyNext",value:function(t,e,n,i,r){this.emitValue()}},{key:"notifyComplete",value:function(){this.emitValue()}},{key:"emitValue",value:function(){this.hasValue&&(this.hasValue=!1,this.destination.next(this.value))}}]),e}(rt.a),ct=n("eIep"),ut=n("UXun"),lt=(n("/uUt"),n("1G5W"),n("JX91")),dt=n("zP0r");n("oB13");var ht,pt,bt,ft,mt,gt,vt,kt,yt,_t,Ct,wt=["*"],Ot=((mt=function t(){_classCallCheck(this,t)}).\u0275fac=function(t){return new(t||mt)},mt.\u0275prov=a.Lb({token:mt,factory:mt.\u0275fac}),mt),Pt=((ft=function(){function t(e,n){var i=this;_classCallCheck(this,t),this._loader=e,this._zone=n,this._map=new Promise((function(t){i._mapResolver=t}))}return _createClass(t,[{key:"createMap",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._loader.load().then((function(){var i=new google.maps.Map(t,e);n._mapResolver(i)}))}))}},{key:"setMapOptions",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){e._map.then((function(e){e.setOptions(t)}))}))}},{key:"createMarker",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return n&&(e.map=t),new google.maps.Marker(e)}))}))}},{key:"createInfoWindow",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(){return new google.maps.InfoWindow(t)}))}))}},{key:"createCircle",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return"string"==typeof t.strokePosition&&(t.strokePosition=google.maps.StrokePosition[t.strokePosition]),t.map=e,new google.maps.Circle(t)}))}))}},{key:"createRectangle",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return t.map=e,new google.maps.Rectangle(t)}))}))}},{key:"createPolyline",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e.getNativeMap().then((function(e){var n=new google.maps.Polyline(t);return n.setMap(e),n}))}))}},{key:"createPolygon",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e.getNativeMap().then((function(e){var n=new google.maps.Polygon(t);return n.setMap(e),n}))}))}},{key:"createDataLayer",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){var n=new google.maps.Data(t);return n.setMap(e),n}))}))}},{key:"createTransitLayer",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){var n=new google.maps.TransitLayer;return n.setMap(t.visible?e:null),n}))}))}},{key:"createBicyclingLayer",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){var n=new google.maps.BicyclingLayer;return n.setMap(t.visible?e:null),n}))}))}},{key:"containsLocation",value:function(t,e){return google.maps.geometry.poly.containsLocation(t,e)}},{key:"subscribeToMapEvent",value:function(t){var e=this;return new J.a((function(n){e._map.then((function(i){i.addListener(t,(function(t){e._zone.run((function(){return n.next(t)}))}))}))}))}},{key:"clearInstanceListeners",value:function(){var t=this;return this._zone.runOutsideAngular((function(){t._map.then((function(t){google.maps.event.clearInstanceListeners(t)}))}))}},{key:"setCenter",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.setCenter(t)}))}))}},{key:"getZoom",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getZoom()}))}))}},{key:"getBounds",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getBounds()}))}))}},{key:"getMapTypeId",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getMapTypeId()}))}))}},{key:"setZoom",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.setZoom(t)}))}))}},{key:"getCenter",value:function(){var t=this;return this._zone.runOutsideAngular((function(){return t._map.then((function(t){return t.getCenter()}))}))}},{key:"panTo",value:function(t){var e=this;return this._zone.runOutsideAngular((function(){return e._map.then((function(e){return e.panTo(t)}))}))}},{key:"panBy",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panBy(t,e)}))}))}},{key:"fitBounds",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.fitBounds(t,e)}))}))}},{key:"panToBounds",value:function(t,e){var n=this;return this._zone.runOutsideAngular((function(){return n._map.then((function(n){return n.panToBounds(t,e)}))}))}},{key:"getNativeMap",value:function(){return this._map}},{key:"triggerMapEvent",value:function(t){return this._map.then((function(e){return google.maps.event.trigger(e,t)}))}}]),t}()).\u0275fac=function(t){return new(t||ft)(a.Zb(Ot),a.Zb(a.A))},ft.\u0275prov=a.Lb({token:ft,factory:ft.\u0275fac}),ft),xt=((bt=function(){function t(e){_classCallCheck(this,t),this._wrapper=e,this._layers=new Map}return _createClass(t,[{key:"addTransitLayer",value:function(t,e){var n=this._wrapper.createTransitLayer(e);this._layers.set(t,n)}},{key:"addBicyclingLayer",value:function(t,e){var n=this._wrapper.createBicyclingLayer(e);this._layers.set(t,n)}},{key:"deleteLayer",value:function(t){var e=this;return this._layers.get(t).then((function(n){n.setMap(null),e._layers.delete(t)}))}},{key:"toggleLayerVisibility",value:function(t,e){var n=this;return this._layers.get(t).then((function(t){return e.visible?n._wrapper.getNativeMap().then((function(e){t.setMap(e)})):void t.setMap(null)}))}}]),t}()).\u0275fac=function(t){return new(t||bt)(a.Zb(Pt))},bt.\u0275prov=a.Lb({token:bt,factory:bt.\u0275fac}),bt),Mt=((pt=function(){function t(e,n){_classCallCheck(this,t),this._apiWrapper=e,this._zone=n,this._circles=new Map}return _createClass(t,[{key:"addCircle",value:function(t){this._circles.set(t,this._apiWrapper.createCircle({center:{lat:t.latitude,lng:t.longitude},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,radius:t.radius,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))}},{key:"removeCircle",value:function(t){var e=this;return this._circles.get(t).then((function(n){n.setMap(null),e._circles.delete(t)}))}},{key:"setOptions",value:function(t,e){return this._circles.get(t).then((function(t){"string"==typeof e.strokePosition&&(e.strokePosition=google.maps.StrokePosition[e.strokePosition]),t.setOptions(e)}))}},{key:"getBounds",value:function(t){return this._circles.get(t).then((function(t){return t.getBounds()}))}},{key:"getCenter",value:function(t){return this._circles.get(t).then((function(t){return t.getCenter()}))}},{key:"getRadius",value:function(t){return this._circles.get(t).then((function(t){return t.getRadius()}))}},{key:"setCenter",value:function(t){return this._circles.get(t).then((function(e){return e.setCenter({lat:t.latitude,lng:t.longitude})}))}},{key:"setEditable",value:function(t){return this._circles.get(t).then((function(e){return e.setEditable(t.editable)}))}},{key:"setDraggable",value:function(t){return this._circles.get(t).then((function(e){return e.setDraggable(t.draggable)}))}},{key:"setVisible",value:function(t){return this._circles.get(t).then((function(e){return e.setVisible(t.visible)}))}},{key:"setRadius",value:function(t){return this._circles.get(t).then((function(e){return e.setRadius(t.radius)}))}},{key:"getNativeCircle",value:function(t){return this._circles.get(t)}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){var r=null;return n._circles.get(e).then((function(e){r=e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))})),function(){null!==r&&r.remove()}}))}}]),t}()).\u0275fac=function(t){return new(t||pt)(a.Zb(Pt),a.Zb(a.A))},pt.\u0275prov=a.Lb({token:pt,factory:pt.\u0275fac}),pt),Vt=((ht=function(){function t(e,n){_classCallCheck(this,t),this._wrapper=e,this._zone=n,this._layers=new Map}return _createClass(t,[{key:"addDataLayer",value:function(t){var e=this,n=this._wrapper.createDataLayer({style:t.style}).then((function(n){return t.geoJson&&e.getDataFeatures(n,t.geoJson).then((function(t){return n.features=t})),n}));this._layers.set(t,n)}},{key:"deleteDataLayer",value:function(t){var e=this;this._layers.get(t).then((function(n){n.setMap(null),e._layers.delete(t)}))}},{key:"updateGeoJson",value:function(t,e){var n=this;this._layers.get(t).then((function(t){t.forEach((function(e){t.remove(e);var n=t.features.indexOf(e,0);n>-1&&t.features.splice(n,1)})),n.getDataFeatures(t,e).then((function(e){return t.features=e}))}))}},{key:"setDataOptions",value:function(t,e){this._layers.get(t).then((function(t){t.setControlPosition(e.controlPosition),t.setControls(e.controls),t.setDrawingMode(e.drawingMode),t.setStyle(e.style)}))}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){n._layers.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))}))}))}},{key:"getDataFeatures",value:function(t,e){return new Promise((function(n,i){if("object"==typeof e)try{n(t.addGeoJson(e))}catch(r){i(r)}else"string"==typeof e?t.loadGeoJson(e,null,n):i("Impossible to extract features from geoJson: wrong argument type")}))}}]),t}()).\u0275fac=function(t){return new(t||ht)(a.Zb(Pt),a.Zb(a.A))},ht.\u0275prov=a.Lb({token:ht,factory:ht.\u0275fac}),ht),It=function t(){_classCallCheck(this,t)},Ut=((kt=function(){function t(e){var n,i=this;_classCallCheck(this,t),this._boundsChangeSampleTime$=new G.a(200),this._includeInBounds$=new G.a(new Map),this.bounds$=Object(X.a)(e.load()).pipe(Object(it.a)((function(){return i._includeInBounds$})),(n=this._boundsChangeSampleTime$.pipe(Object(ct.a)((function(t){return Object(K.a)(0,t)}))),function(t){return t.lift(new at(n))}),Object(et.a)((function(t){return i._generateBounds(t)})),Object(ut.a)(1))}return _createClass(t,[{key:"_generateBounds",value:function(t){var e=new google.maps.LatLngBounds;return t.forEach((function(t){return e.extend(t)})),e}},{key:"addToBounds",value:function(t){var e=this._createIdentifier(t);if(!this._includeInBounds$.value.has(e)){var n=this._includeInBounds$.value;n.set(e,t),this._includeInBounds$.next(n)}}},{key:"removeFromBounds",value:function(t){var e=this._includeInBounds$.value;e.delete(this._createIdentifier(t)),this._includeInBounds$.next(e)}},{key:"changeFitBoundsChangeSampleTime",value:function(t){this._boundsChangeSampleTime$.next(t)}},{key:"getBounds$",value:function(){return this.bounds$}},{key:"_createIdentifier",value:function(t){return"".concat(t.lat,"+").concat(t.lng)}}]),t}()).\u0275fac=function(t){return new(t||kt)(a.Zb(Ot))},kt.\u0275prov=a.Lb({token:kt,factory:kt.\u0275fac}),kt),zt=((vt=function(){function t(e,n){_classCallCheck(this,t),this._mapsWrapper=e,this._zone=n,this._markers=new Map}return _createClass(t,[{key:"convertAnimation",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===t?null:this._mapsWrapper.getNativeMap().then((function(){return google.maps.Animation[t]})));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"deleteMarker",value:function(t){var e=this,n=this._markers.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setMap(null),e._markers.delete(t)}))}))}},{key:"updateMarkerPosition",value:function(t){return this._markers.get(t).then((function(e){return e.setPosition({lat:t.latitude,lng:t.longitude})}))}},{key:"updateTitle",value:function(t){return this._markers.get(t).then((function(e){return e.setTitle(t.title)}))}},{key:"updateLabel",value:function(t){return this._markers.get(t).then((function(e){e.setLabel(t.label)}))}},{key:"updateDraggable",value:function(t){return this._markers.get(t).then((function(e){return e.setDraggable(t.draggable)}))}},{key:"updateIcon",value:function(t){return this._markers.get(t).then((function(e){return e.setIcon(t.iconUrl)}))}},{key:"updateOpacity",value:function(t){return this._markers.get(t).then((function(e){return e.setOpacity(t.opacity)}))}},{key:"updateVisible",value:function(t){return this._markers.get(t).then((function(e){return e.setVisible(t.visible)}))}},{key:"updateZIndex",value:function(t){return this._markers.get(t).then((function(e){return e.setZIndex(t.zIndex)}))}},{key:"updateClickable",value:function(t){return this._markers.get(t).then((function(e){return e.setClickable(t.clickable)}))}},{key:"updateAnimation",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._markers.get(t);case 2:return e.t0=e.sent,e.next=5,this.convertAnimation(t.animation);case 5:e.t1=e.sent,e.t0.setAnimation.call(e.t0,e.t1);case 7:case"end":return e.stop()}}),e,this)})))}},{key:"addMarker",value:function(t){var e=this,n=new Promise((function(n){return Object(Z.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this._mapsWrapper,e.t1={lat:t.latitude,lng:t.longitude},e.t2=t.label,e.t3=t.draggable,e.t4=t.iconUrl,e.t5=t.opacity,e.t6=t.visible,e.t7=t.zIndex,e.t8=t.title,e.t9=t.clickable,e.next=12,this.convertAnimation(t.animation);case 12:return e.t10=e.sent,e.t11={position:e.t1,label:e.t2,draggable:e.t3,icon:e.t4,opacity:e.t5,visible:e.t6,zIndex:e.t7,title:e.t8,clickable:e.t9,animation:e.t10},e.t12=n,e.abrupt("return",e.t0.createMarker.call(e.t0,e.t11).then(e.t12));case 16:case"end":return e.stop()}}),e,this)})))}));this._markers.set(t,n)}},{key:"getNativeMarker",value:function(t){return this._markers.get(t)}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){n._markers.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||vt)(a.Zb(Pt),a.Zb(a.A))},vt.\u0275prov=a.Lb({token:vt,factory:vt.\u0275fac}),vt),At=((gt=function(){function t(e,n,i){_classCallCheck(this,t),this._mapsWrapper=e,this._zone=n,this._markerManager=i,this._infoWindows=new Map}return _createClass(t,[{key:"deleteInfoWindow",value:function(t){var e=this,n=this._infoWindows.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.close(),e._infoWindows.delete(t)}))}))}},{key:"setPosition",value:function(t){return this._infoWindows.get(t).then((function(e){return e.setPosition({lat:t.latitude,lng:t.longitude})}))}},{key:"setZIndex",value:function(t){return this._infoWindows.get(t).then((function(e){return e.setZIndex(t.zIndex)}))}},{key:"open",value:function(t){var e=this;return this._infoWindows.get(t).then((function(n){return null!=t.hostMarker?e._markerManager.getNativeMarker(t.hostMarker).then((function(t){return e._mapsWrapper.getNativeMap().then((function(e){return n.open(e,t)}))})):e._mapsWrapper.getNativeMap().then((function(t){return n.open(t)}))}))}},{key:"close",value:function(t){return this._infoWindows.get(t).then((function(t){return t.close()}))}},{key:"setOptions",value:function(t,e){return this._infoWindows.get(t).then((function(t){return t.setOptions(e)}))}},{key:"addInfoWindow",value:function(t){var e={content:t.content,maxWidth:t.maxWidth,zIndex:t.zIndex,disableAutoPan:t.disableAutoPan};"number"==typeof t.latitude&&"number"==typeof t.longitude&&(e.position={lat:t.latitude,lng:t.longitude});var n=this._mapsWrapper.createInfoWindow(e);this._infoWindows.set(t,n)}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){n._infoWindows.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||gt)(a.Zb(Pt),a.Zb(a.A),a.Zb(zt))},gt.\u0275prov=a.Lb({token:gt,factory:gt.\u0275fac}),gt),Dt=0,Bt=((Ct=yt=function(){function t(e,n){_classCallCheck(this,t),this._infoWindowManager=e,this._el=n,this.isOpen=!1,this.infoWindowClose=new a.o,this._infoWindowAddedToManager=!1,this._id=(Dt++).toString()}return _createClass(t,[{key:"ngOnInit",value:function(){this.content=this._el.nativeElement.querySelector(".agm-info-window-content"),this._infoWindowManager.addInfoWindow(this),this._infoWindowAddedToManager=!0,this._updateOpenState(),this._registerEventListeners()}},{key:"ngOnChanges",value:function(t){this._infoWindowAddedToManager&&((t.latitude||t.longitude)&&"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._infoWindowManager.setPosition(this),t.zIndex&&this._infoWindowManager.setZIndex(this),t.isOpen&&this._updateOpenState(),this._setInfoWindowOptions(t))}},{key:"_registerEventListeners",value:function(){var t=this;this._infoWindowManager.createEventObservable("closeclick",this).subscribe((function(){t.isOpen=!1,t.infoWindowClose.emit()}))}},{key:"_updateOpenState",value:function(){this.isOpen?this.open():this.close()}},{key:"_setInfoWindowOptions",value:function(t){var e={};Object.keys(t).filter((function(t){return-1!==yt._infoWindowOptionsInputs.indexOf(t)})).forEach((function(n){e[n]=t[n].currentValue})),this._infoWindowManager.setOptions(this,e)}},{key:"open",value:function(){return this._infoWindowManager.open(this)}},{key:"close",value:function(){var t=this;return this._infoWindowManager.close(this).then((function(){t.infoWindowClose.emit()}))}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmInfoWindow-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._infoWindowManager.deleteInfoWindow(this)}}]),t}()).\u0275fac=function(t){return new(t||Ct)(a.Pb(At),a.Pb(a.l))},Ct.\u0275cmp=a.Jb({type:Ct,selectors:[["agm-info-window"]],inputs:{isOpen:"isOpen",latitude:"latitude",longitude:"longitude",disableAutoPan:"disableAutoPan",zIndex:"zIndex",maxWidth:"maxWidth"},outputs:{infoWindowClose:"infoWindowClose"},features:[a.Ab()],ngContentSelectors:wt,decls:2,vars:0,consts:[[1,"agm-info-window-content"]],template:function(t,e){1&t&&(a.lc(),a.Vb(0,"div",0),a.kc(1),a.Ub())},encapsulation:2}),Ct._infoWindowOptionsInputs=["disableAutoPan","maxWidth"],Ct),Lt=((_t=function(){function t(e,n){_classCallCheck(this,t),this._wrapper=e,this._zone=n,this._layers=new Map}return _createClass(t,[{key:"addKmlLayer",value:function(t){var e=this._wrapper.getNativeMap().then((function(e){return new google.maps.KmlLayer({clickable:t.clickable,map:e,preserveViewport:t.preserveViewport,screenOverlays:t.screenOverlays,suppressInfoWindows:t.suppressInfoWindows,url:t.url,zIndex:t.zIndex})}));this._layers.set(t,e)}},{key:"setOptions",value:function(t,e){this._layers.get(t).then((function(t){return t.setOptions(e)}))}},{key:"deleteKmlLayer",value:function(t){var e=this;this._layers.get(t).then((function(n){n.setMap(null),e._layers.delete(t)}))}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){n._layers.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))}))}))}}]),t}()).\u0275fac=function(t){return new(t||_t)(a.Zb(Pt),a.Zb(a.A))},_t.\u0275prov=a.Lb({token:_t,factory:_t.\u0275fac}),_t);function Tt(t){var e=["insert_at","remove_at","set_at"];return function t(e,n,i){return i?t(e,n).pipe(Object(et.a)((function(t){return Object(Y.a)(t)?i.apply(void 0,_toConsumableArray(t)):i(t)}))):new J.a((function(t){var i,r=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t.next(1===n.length?n[0]:n)};try{i=e(r)}catch(o){return void t.error(o)}if(Object(tt.a)(n))return function(){return n(r,i)}}))}((function(n){return e.map((function(e){return t.addListener(e,(function(i,r){return n.apply(t,[{newArr:t.getArray(),evName:e,index:i,previous:r}])}))}))}),(function(t,e){return e.forEach((function(t){return t.remove()}))}))}var St,Wt,Rt,Et,jt,Ft,Nt,Qt,Zt,qt,$t,Ht=((St=function(){function t(e,n){_classCallCheck(this,t),this._mapsWrapper=e,this._zone=n,this._polygons=new Map}return _createClass(t,[{key:"addPolygon",value:function(t){var e=this._mapsWrapper.createPolygon({clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,geodesic:t.geodesic,paths:t.paths,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex});this._polygons.set(t,e)}},{key:"updatePolygon",value:function(t){var e=this,n=this._polygons.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setPaths(t.paths)}))}))}},{key:"setPolygonOptions",value:function(t,e){return this._polygons.get(t).then((function(t){t.setOptions(e)}))}},{key:"deletePolygon",value:function(t){var e=this,n=this._polygons.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setMap(null),e._polygons.delete(t)}))}))}},{key:"getPath",value:function(t){return this._polygons.get(t).then((function(t){return t.getPath().getArray()}))}},{key:"getPaths",value:function(t){return this._polygons.get(t).then((function(t){return t.getPaths().getArray().map((function(t){return t.getArray()}))}))}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){n._polygons.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))}))}))}},{key:"createPathEventObservable",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._polygons.get(t);case 2:return n=e.sent.getPaths(),e.abrupt("return",Tt(n).pipe(Object(lt.a)({newArr:n.getArray()}),Object(ct.a)((function(t){return Object(c.a).apply(void 0,_toConsumableArray(t.newArr.map((function(e,n){return Tt(e).pipe(Object(et.a)((function(e){return{parentMVEvent:t,chMVCEvent:e,pathIndex:n}})))})))).pipe(Object(lt.a)({parentMVEvent:t,chMVCEvent:null,pathIndex:null}))})),Object(dt.a)(1),Object(et.a)((function(t){var e,n=t.parentMVEvent,i=t.chMVCEvent,r=t.pathIndex;return i?(e={newArr:n.newArr.map((function(t){return t.getArray().map((function(t){return t.toJSON()}))})),pathIndex:r,eventName:i.evName,index:i.index},i.previous&&(e.previous=i.previous)):(e={newArr:n.newArr.map((function(t){return t.getArray().map((function(t){return t.toJSON()}))})),eventName:n.evName,index:n.index},n.previous&&(e.previous=n.previous.getArray())),e}))));case 4:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||St)(a.Zb(Pt),a.Zb(a.A))},St.\u0275prov=a.Lb({token:St,factory:St.\u0275fac}),St),Jt=((Et=Wt=function(){function t(e,n){_classCallCheck(this,t),this._mapsWrapper=e,this._zone=n,this._polylines=new Map}return _createClass(t,[{key:"addPolyline",value:function(t){var e=this,n=this._mapsWrapper.getNativeMap().then((function(){return[Wt._convertPoints(t),Wt._convertIcons(t)]})).then((function(n){var i=_slicedToArray(n,2),r=i[0],o=i[1];return e._mapsWrapper.createPolyline({clickable:t.clickable,draggable:t.draggable,editable:t.editable,geodesic:t.geodesic,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex,path:r,icons:o})}));this._polylines.set(t,n)}},{key:"updatePolylinePoints",value:function(t){var e=this,n=Wt._convertPoints(t),i=this._polylines.get(t);return null==i?Promise.resolve():i.then((function(t){return e._zone.run((function(){t.setPath(n)}))}))}},{key:"updateIconSequences",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._mapsWrapper.getNativeMap();case 2:if(n=Wt._convertIcons(t),null==(i=this._polylines.get(t))){e.next=5;break}return e.abrupt("return",i.then((function(t){return r._zone.run((function(){return t.setOptions({icons:n})}))})));case 5:case"end":return e.stop()}}),e,this)})))}},{key:"setPolylineOptions",value:function(t,e){return this._polylines.get(t).then((function(t){t.setOptions(e)}))}},{key:"deletePolyline",value:function(t){var e=this,n=this._polylines.get(t);return null==n?Promise.resolve():n.then((function(n){return e._zone.run((function(){n.setMap(null),e._polylines.delete(t)}))}))}},{key:"getMVCPath",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._polylines.get(t);case 2:return e.abrupt("return",e.sent.getPath());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"getPath",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMVCPath(t);case 2:return e.abrupt("return",e.sent.getArray());case 3:case"end":return e.stop()}}),e,this)})))}},{key:"createEventObservable",value:function(t,e){var n=this;return new J.a((function(i){n._polylines.get(e).then((function(e){e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))}))}))}},{key:"createPathEventObservable",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Tt,e.next=3,this.getMVCPath(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e,this)})))}}],[{key:"_convertPoints",value:function(t){return t._getPoints().map((function(t){return{lat:t.latitude,lng:t.longitude}}))}},{key:"_convertPath",value:function(t){var e=google.maps.SymbolPath[t];return"number"==typeof e?e:t}},{key:"_convertIcons",value:function(t){var e=t._getIcons().map((function(t){return{fixedRotation:t.fixedRotation,offset:t.offset,repeat:t.repeat,icon:{anchor:new google.maps.Point(t.anchorX,t.anchorY),fillColor:t.fillColor,fillOpacity:t.fillOpacity,path:Wt._convertPath(t.path),rotation:t.rotation,scale:t.scale,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokeWeight:t.strokeWeight}}}));return e.forEach((function(t){Object.entries(t).forEach((function(e){var n=_slicedToArray(e,2),i=n[0];void 0===n[1]&&delete t[i]})),void 0!==t.icon.anchor.x&&void 0!==t.icon.anchor.y||delete t.icon.anchor})),e}}]),t}()).\u0275fac=function(t){return new(t||Et)(a.Zb(Pt),a.Zb(a.A))},Et.\u0275prov=a.Lb({token:Et,factory:Et.\u0275fac}),Et),Gt=((Rt=function(){function t(e,n){_classCallCheck(this,t),this._apiWrapper=e,this._zone=n,this._rectangles=new Map}return _createClass(t,[{key:"addRectangle",value:function(t){this._rectangles.set(t,this._apiWrapper.createRectangle({bounds:{north:t.north,east:t.east,south:t.south,west:t.west},clickable:t.clickable,draggable:t.draggable,editable:t.editable,fillColor:t.fillColor,fillOpacity:t.fillOpacity,strokeColor:t.strokeColor,strokeOpacity:t.strokeOpacity,strokePosition:t.strokePosition,strokeWeight:t.strokeWeight,visible:t.visible,zIndex:t.zIndex}))}},{key:"removeRectangle",value:function(t){var e=this;return this._rectangles.get(t).then((function(n){n.setMap(null),e._rectangles.delete(t)}))}},{key:"setOptions",value:function(t,e){return this._rectangles.get(t).then((function(t){return t.setOptions(e)}))}},{key:"getBounds",value:function(t){return this._rectangles.get(t).then((function(t){return t.getBounds()}))}},{key:"setBounds",value:function(t){return this._rectangles.get(t).then((function(e){return e.setBounds({north:t.north,east:t.east,south:t.south,west:t.west})}))}},{key:"setEditable",value:function(t){return this._rectangles.get(t).then((function(e){return e.setEditable(t.editable)}))}},{key:"setDraggable",value:function(t){return this._rectangles.get(t).then((function(e){return e.setDraggable(t.draggable)}))}},{key:"setVisible",value:function(t){return this._rectangles.get(t).then((function(e){return e.setVisible(t.visible)}))}},{key:"createEventObservable",value:function(t,e){var n=this;return J.a.create((function(i){var r=null;return n._rectangles.get(e).then((function(e){r=e.addListener(t,(function(t){return n._zone.run((function(){return i.next(t)}))}))})),function(){null!==r&&r.remove()}}))}}]),t}()).\u0275fac=function(t){return new(t||Rt)(a.Zb(Pt),a.Zb(a.A))},Rt.\u0275prov=a.Lb({token:Rt,factory:Rt.\u0275fac}),Rt),Xt=((Ft=jt=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this._elem=e,this._mapsWrapper=n,this._platformId=i,this._fitBoundsService=r,this._zone=o,this.longitude=0,this.latitude=0,this.zoom=8,this.draggable=!0,this.disableDoubleClickZoom=!1,this.disableDefaultUI=!1,this.scrollwheel=!0,this.keyboardShortcuts=!0,this.styles=[],this.usePanning=!1,this.fitBounds=!1,this.scaleControl=!1,this.mapTypeControl=!1,this.panControl=!1,this.rotateControl=!1,this.fullscreenControl=!1,this.mapTypeId="roadmap",this.clickableIcons=!0,this.showDefaultInfoWindow=!0,this.gestureHandling="auto",this.tilt=0,this._observableSubscriptions=[],this.mapClick=new a.o,this.mapRightClick=new a.o,this.mapDblClick=new a.o,this.centerChange=new a.o,this.boundsChange=new a.o,this.mapTypeIdChange=new a.o,this.idle=new a.o,this.zoomChange=new a.o,this.mapReady=new a.o,this.tilesLoaded=new a.o}return _createClass(t,[{key:"ngOnInit",value:function(){if(!Object(r.u)(this._platformId)){var t=this._elem.nativeElement.querySelector(".agm-map-container-inner");this._initMapInstance(t)}}},{key:"_initMapInstance",value:function(t){var e=this;this._mapsWrapper.createMap(t,{center:{lat:this.latitude||0,lng:this.longitude||0},zoom:this.zoom,minZoom:this.minZoom,maxZoom:this.maxZoom,controlSize:this.controlSize,disableDefaultUI:this.disableDefaultUI,disableDoubleClickZoom:this.disableDoubleClickZoom,scrollwheel:this.scrollwheel,backgroundColor:this.backgroundColor,draggable:this.draggable,draggableCursor:this.draggableCursor,draggingCursor:this.draggingCursor,keyboardShortcuts:this.keyboardShortcuts,styles:this.styles,zoomControl:this.zoomControl,zoomControlOptions:this.zoomControlOptions,streetViewControl:this.streetViewControl,streetViewControlOptions:this.streetViewControlOptions,scaleControl:this.scaleControl,scaleControlOptions:this.scaleControlOptions,mapTypeControl:this.mapTypeControl,mapTypeControlOptions:this.mapTypeControlOptions,panControl:this.panControl,panControlOptions:this.panControlOptions,rotateControl:this.rotateControl,rotateControlOptions:this.rotateControlOptions,fullscreenControl:this.fullscreenControl,fullscreenControlOptions:this.fullscreenControlOptions,mapTypeId:this.mapTypeId,clickableIcons:this.clickableIcons,gestureHandling:this.gestureHandling,tilt:this.tilt,restriction:this.restriction}).then((function(){return e._mapsWrapper.getNativeMap()})).then((function(t){return e.mapReady.emit(t)})),this._handleMapCenterChange(),this._handleMapZoomChange(),this._handleMapMouseEvents(),this._handleBoundsChange(),this._handleMapTypeIdChange(),this._handleTilesLoadedEvent(),this._handleIdleEvent()}},{key:"ngOnDestroy",value:function(){this._observableSubscriptions.forEach((function(t){return t.unsubscribe()})),this._mapsWrapper.clearInstanceListeners(),this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe()}},{key:"ngOnChanges",value:function(t){this._updateMapOptionsChanges(t),this._updatePosition(t)}},{key:"_updateMapOptionsChanges",value:function(t){var e={};Object.keys(t).filter((function(t){return-1!==jt._mapOptionsAttributes.indexOf(t)})).forEach((function(n){e[n]=t[n].currentValue})),this._mapsWrapper.setMapOptions(e)}},{key:"triggerResize",value:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return new Promise((function(n){setTimeout((function(){return t._mapsWrapper.triggerMapEvent("resize").then((function(){e&&(null!=t.fitBounds?t._fitBounds():t._setCenter()),n()}))}))}))}},{key:"_updatePosition",value:function(t){(null!=t.latitude||null!=t.longitude||t.fitBounds)&&("fitBounds"in t?this._fitBounds():"number"==typeof this.latitude&&"number"==typeof this.longitude&&this._setCenter())}},{key:"_setCenter",value:function(){var t={lat:this.latitude,lng:this.longitude};this.usePanning?this._mapsWrapper.panTo(t):this._mapsWrapper.setCenter(t)}},{key:"_fitBounds",value:function(){switch(this.fitBounds){case!0:this._subscribeToFitBoundsUpdates();break;case!1:this._fitBoundsSubscription&&this._fitBoundsSubscription.unsubscribe();break;default:this._updateBounds(this.fitBounds,this.fitBoundsPadding)}}},{key:"_subscribeToFitBoundsUpdates",value:function(){var t=this;this._zone.runOutsideAngular((function(){t._fitBoundsSubscription=t._fitBoundsService.getBounds$().subscribe((function(e){t._zone.run((function(){return t._updateBounds(e,t.fitBoundsPadding)}))}))}))}},{key:"_updateBounds",value:function(t,e){if(t){if(this._isLatLngBoundsLiteral(t)&&"undefined"!=typeof google&&google&&google.maps&&google.maps.LatLngBounds){var n=new google.maps.LatLngBounds;n.union(t),t=n}this.usePanning?this._mapsWrapper.panToBounds(t,e):this._mapsWrapper.fitBounds(t,e)}}},{key:"_isLatLngBoundsLiteral",value:function(t){return null!=t&&void 0===t.extend}},{key:"_handleMapCenterChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("center_changed").subscribe((function(){t._mapsWrapper.getCenter().then((function(e){t.latitude=e.lat(),t.longitude=e.lng(),t.centerChange.emit({lat:t.latitude,lng:t.longitude})}))}));this._observableSubscriptions.push(e)}},{key:"_handleBoundsChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("bounds_changed").subscribe((function(){t._mapsWrapper.getBounds().then((function(e){t.boundsChange.emit(e)}))}));this._observableSubscriptions.push(e)}},{key:"_handleMapTypeIdChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("maptypeid_changed").subscribe((function(){t._mapsWrapper.getMapTypeId().then((function(e){t.mapTypeIdChange.emit(e)}))}));this._observableSubscriptions.push(e)}},{key:"_handleMapZoomChange",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("zoom_changed").subscribe((function(){t._mapsWrapper.getZoom().then((function(e){t.zoom=e,t.zoomChange.emit(e)}))}));this._observableSubscriptions.push(e)}},{key:"_handleIdleEvent",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("idle").subscribe((function(){t.idle.emit(void 0)}));this._observableSubscriptions.push(e)}},{key:"_handleTilesLoadedEvent",value:function(){var t=this,e=this._mapsWrapper.subscribeToMapEvent("tilesloaded").subscribe((function(){return t.tilesLoaded.emit(void 0)}));this._observableSubscriptions.push(e)}},{key:"_handleMapMouseEvents",value:function(){var t=this;[{name:"click",emitter:this.mapClick},{name:"rightclick",emitter:this.mapRightClick},{name:"dblclick",emitter:this.mapDblClick}].forEach((function(e){var n=t._mapsWrapper.subscribeToMapEvent(e.name).subscribe((function(n){var i={coords:{lat:n.latLng.lat(),lng:n.latLng.lng()},placeId:n.placeId};i.placeId&&!t.showDefaultInfoWindow&&n.stop(),e.emitter.emit(i)}));t._observableSubscriptions.push(n)}))}}]),t}()).\u0275fac=function(t){return new(t||Ft)(a.Pb(a.l),a.Pb(Pt),a.Pb(a.C),a.Pb(Ut),a.Pb(a.A))},Ft.\u0275cmp=a.Jb({type:Ft,selectors:[["agm-map"]],hostVars:2,hostBindings:function(t,e){2&t&&a.Gb("sebm-google-map-container",!0)},inputs:{longitude:"longitude",latitude:"latitude",zoom:"zoom",draggable:["mapDraggable","draggable"],disableDoubleClickZoom:"disableDoubleClickZoom",disableDefaultUI:"disableDefaultUI",scrollwheel:"scrollwheel",keyboardShortcuts:"keyboardShortcuts",styles:"styles",usePanning:"usePanning",fitBounds:"fitBounds",scaleControl:"scaleControl",mapTypeControl:"mapTypeControl",panControl:"panControl",rotateControl:"rotateControl",fullscreenControl:"fullscreenControl",mapTypeId:"mapTypeId",clickableIcons:"clickableIcons",showDefaultInfoWindow:"showDefaultInfoWindow",gestureHandling:"gestureHandling",tilt:"tilt",minZoom:"minZoom",maxZoom:"maxZoom",controlSize:"controlSize",backgroundColor:"backgroundColor",draggableCursor:"draggableCursor",draggingCursor:"draggingCursor",zoomControl:"zoomControl",zoomControlOptions:"zoomControlOptions",streetViewControl:"streetViewControl",streetViewControlOptions:"streetViewControlOptions",fitBoundsPadding:"fitBoundsPadding",scaleControlOptions:"scaleControlOptions",mapTypeControlOptions:"mapTypeControlOptions",panControlOptions:"panControlOptions",rotateControlOptions:"rotateControlOptions",fullscreenControlOptions:"fullscreenControlOptions",restriction:"restriction"},outputs:{mapClick:"mapClick",mapRightClick:"mapRightClick",mapDblClick:"mapDblClick",centerChange:"centerChange",boundsChange:"boundsChange",mapTypeIdChange:"mapTypeIdChange",idle:"idle",zoomChange:"zoomChange",mapReady:"mapReady",tilesLoaded:"tilesLoaded"},features:[a.Bb([Mt,Vt,Vt,Ut,Pt,At,Lt,xt,zt,Ht,Jt,Gt]),a.Ab()],ngContentSelectors:wt,decls:3,vars:0,consts:[[1,"agm-map-container-inner","sebm-google-map-container-inner"],[1,"agm-map-content"]],template:function(t,e){1&t&&(a.lc(),a.Qb(0,"div",0),a.Vb(1,"div",1),a.kc(2),a.Ub())},styles:[".agm-map-container-inner[_ngcontent-%COMP%] {\n      width: inherit;\n      height: inherit;\n    }\n    .agm-map-content[_ngcontent-%COMP%] {\n      display:none;\n    }"]}),Ft._mapOptionsAttributes=["disableDoubleClickZoom","scrollwheel","draggable","draggableCursor","draggingCursor","keyboardShortcuts","zoomControl","zoomControlOptions","styles","streetViewControl","streetViewControlOptions","zoom","mapTypeControl","mapTypeControlOptions","minZoom","maxZoom","panControl","panControlOptions","rotateControl","rotateControlOptions","fullscreenControl","fullscreenControlOptions","scaleControl","scaleControlOptions","mapTypeId","clickableIcons","gestureHandling","tilt","restriction"],Ft),Kt=0,Yt=((Qt=Nt=function(){function t(e){_classCallCheck(this,t),this._markerManager=e,this.draggable=!1,this.visible=!0,this.openInfoWindow=!0,this.opacity=1,this.zIndex=1,this.clickable=!0,this.animationChange=new a.o,this.markerClick=new a.o,this.markerDblClick=new a.o,this.markerRightClick=new a.o,this.dragStart=new a.o,this.drag=new a.o,this.dragEnd=new a.o,this.mouseOver=new a.o,this.mouseOut=new a.o,this.infoWindow=new a.E,this._markerAddedToManger=!1,this._observableSubscriptions=[],this._fitBoundsDetails$=new nt.a(1),this._id=(Kt++).toString()}return _createClass(t,[{key:"ngAfterContentInit",value:function(){var t=this;this.handleInfoWindowUpdate(),this.infoWindow.changes.subscribe((function(){return t.handleInfoWindowUpdate()}))}},{key:"handleInfoWindowUpdate",value:function(){var t=this;if(this.infoWindow.length>1)throw new Error("Expected no more than one info window.");this.infoWindow.forEach((function(e){e.hostMarker=t}))}},{key:"ngOnChanges",value:function(t){if("string"==typeof this.latitude&&(this.latitude=Number(this.latitude)),"string"==typeof this.longitude&&(this.longitude=Number(this.longitude)),"number"==typeof this.latitude&&"number"==typeof this.longitude){if(!this._markerAddedToManger)return this._markerManager.addMarker(this),this._updateFitBoundsDetails(),this._markerAddedToManger=!0,void this._addEventListeners();(t.latitude||t.longitude)&&(this._markerManager.updateMarkerPosition(this),this._updateFitBoundsDetails()),t.title&&this._markerManager.updateTitle(this),t.label&&this._markerManager.updateLabel(this),t.draggable&&this._markerManager.updateDraggable(this),t.iconUrl&&this._markerManager.updateIcon(this),t.opacity&&this._markerManager.updateOpacity(this),t.visible&&this._markerManager.updateVisible(this),t.zIndex&&this._markerManager.updateZIndex(this),t.clickable&&this._markerManager.updateClickable(this),t.animation&&this._markerManager.updateAnimation(this)}}},{key:"getFitBoundsDetails$",value:function(){return this._fitBoundsDetails$.asObservable()}},{key:"_updateFitBoundsDetails",value:function(){this._fitBoundsDetails$.next({latLng:{lat:this.latitude,lng:this.longitude}})}},{key:"_addEventListeners",value:function(){var t=this,e=this._markerManager.createEventObservable("click",this).subscribe((function(){t.openInfoWindow&&t.infoWindow.forEach((function(t){return t.open()})),t.markerClick.emit(t)}));this._observableSubscriptions.push(e);var n=this._markerManager.createEventObservable("dblclick",this).subscribe((function(){t.markerDblClick.emit(null)}));this._observableSubscriptions.push(n);var i=this._markerManager.createEventObservable("rightclick",this).subscribe((function(){t.markerRightClick.emit(null)}));this._observableSubscriptions.push(i);var r=this._markerManager.createEventObservable("dragstart",this).subscribe((function(e){t.dragStart.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(r);var o=this._markerManager.createEventObservable("drag",this).subscribe((function(e){t.drag.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(o);var a=this._markerManager.createEventObservable("dragend",this).subscribe((function(e){t.dragEnd.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(a);var s=this._markerManager.createEventObservable("mouseover",this).subscribe((function(e){t.mouseOver.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(s);var c=this._markerManager.createEventObservable("mouseout",this).subscribe((function(e){t.mouseOut.emit({coords:{lat:e.latLng.lat(),lng:e.latLng.lng()}})}));this._observableSubscriptions.push(c);var u=this._markerManager.createEventObservable("animation_changed",this).subscribe((function(){t.animationChange.emit(t.animation)}));this._observableSubscriptions.push(u)}},{key:"id",value:function(){return this._id}},{key:"toString",value:function(){return"AgmMarker-"+this._id.toString()}},{key:"ngOnDestroy",value:function(){this._markerManager.deleteMarker(this),this._observableSubscriptions.forEach((function(t){return t.unsubscribe()}))}}]),t}()).\u0275fac=function(t){return new(t||Qt)(a.Pb(zt))},Qt.\u0275dir=a.Kb({type:Qt,selectors:[["agm-marker"]],contentQueries:function(t,e,n){var i;1&t&&a.Ib(n,Bt,!1),2&t&&a.qc(i=a.ec())&&(e.infoWindow=i)},inputs:{latitude:"latitude",longitude:"longitude",title:"title",label:"label",draggable:["markerDraggable","draggable"],iconUrl:"iconUrl",openInfoWindow:"openInfoWindow",opacity:"opacity",visible:"visible",zIndex:"zIndex",animation:"animation",clickable:["markerClickable","clickable"]},outputs:{markerClick:"markerClick",dragStart:"dragStart",drag:"drag",dragEnd:"dragEnd",mouseOver:"mouseOver",mouseOut:"mouseOut",animationChange:"animationChange",markerDblClick:"markerDblClick",markerRightClick:"markerRightClick"},features:[a.Bb([{provide:It,useExisting:Object(a.U)((function(){return Nt}))}]),a.Ab()]}),Qt),te=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getNativeWindow",value:function(){return window}}]),t}(),ee=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"getNativeDocument",value:function(){return document}}]),t}(),ne=[te,ee],ie=function(t){return t[t.HTTP=1]="HTTP",t[t.HTTPS=2]="HTTPS",t[t.AUTO=3]="AUTO",t}({}),re=new a.r("angular-google-maps LAZY_MAPS_API_CONFIG"),oe=((Zt=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,e),(t=_possibleConstructorReturn(this,_getPrototypeOf(e).call(this))).localeId=o,t._SCRIPT_ID="agmGoogleMapsApiScript",t.callbackName="agmLazyMapsAPILoader",t._config=n||{},t._windowRef=i,t._documentRef=r,t}return _inherits(e,t),_createClass(e,[{key:"load",value:function(){var t=this._windowRef.getNativeWindow();if(t.google&&t.google.maps)return Promise.resolve();if(this._scriptLoadingPromise)return this._scriptLoadingPromise;var e=this._documentRef.getNativeDocument().getElementById(this._SCRIPT_ID);if(e)return this._assignScriptLoadingPromise(e),this._scriptLoadingPromise;var n=this._documentRef.getNativeDocument().createElement("script");return n.type="text/javascript",n.async=!0,n.defer=!0,n.id=this._SCRIPT_ID,n.src=this._getScriptSrc(this.callbackName),this._assignScriptLoadingPromise(n),this._documentRef.getNativeDocument().body.appendChild(n),this._scriptLoadingPromise}},{key:"_assignScriptLoadingPromise",value:function(t){var e=this;this._scriptLoadingPromise=new Promise((function(n,i){e._windowRef.getNativeWindow()[e.callbackName]=function(){n()},t.onerror=function(t){i(t)}}))}},{key:"_getScriptSrc",value:function(t){var e;switch(this._config&&this._config.protocol||ie.HTTPS){case ie.AUTO:e="";break;case ie.HTTP:e="http:";break;case ie.HTTPS:e="https:"}var n={v:this._config.apiVersion||"quarterly",callback:t,key:this._config.apiKey,client:this._config.clientId,channel:this._config.channel,libraries:this._config.libraries,region:this._config.region,language:this._config.language||"en-US"!==this.localeId?this.localeId:null};return"".concat(e,"//").concat(this._config.hostAndPath||"maps.googleapis.com/maps/api/js","?").concat(Object.keys(n).filter((function(t){return null!=n[t]})).filter((function(t){return!Array.isArray(n[t])||Array.isArray(n[t])&&n[t].length>0})).map((function(t){var e=n[t];return Array.isArray(e)?{key:t,value:e.join(",")}:{key:t,value:n[t]}})).map((function(t){return"".concat(t.key,"=").concat(t.value)})).join("&"))}}]),e}(Ot)).\u0275fac=function(t){return new(t||Zt)(a.Zb(re,8),a.Zb(te),a.Zb(ee),a.Zb(a.v))},Zt.\u0275prov=a.Lb({token:Zt,factory:Zt.\u0275fac}),Zt),ae=(($t=qt=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"forRoot",value:function(t){return{ngModule:qt,providers:[].concat(ne,[{provide:Ot,useClass:oe},{provide:re,useValue:t}])}}}]),t}()).\u0275mod=a.Nb({type:$t}),$t.\u0275inj=a.Mb({factory:function(t){return new(t||$t)}}),$t);function se(t,e){if(1&t){var n=a.Wb();a.Vb(0,"agm-marker",2),a.dc("dragEnd",(function(t){a.tc(n);var i=e.$implicit;return a.hc().markerDragEnd(i,t)}))("markerClick",(function(t){a.tc(n);var i=e.$implicit,r=e.index;return a.hc().clickedMarker(i,r)})),a.Ub()}if(2&t){var i=e.$implicit;a.mc("latitude",i.lat)("longitude",i.lng)("label",i.label)("markerDraggable",i.draggable)}}var ce,ue,le,de=((ce=function(){function t(){_classCallCheck(this,t),this.eventToParent=new a.o,this.postitionFromParent=new a.o,this.showMarker=!0,this.zoom=6,this.lat=48.86,this.lng=2.39,this.draggable=!1,this.markers=[]}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.postitionFromParent.subscribe((function(e){e&&e.lat&&e.lng&&(t.lat=e.lat,t.lng=e.lng,t.markers.push({lat:t.lat,lng:t.lng,draggable:t.draggable}),console.log(t.markers))}))}},{key:"clickedMarker",value:function(t,e){}},{key:"mapClicked",value:function(t){this.showMarker&&(this.lat=t.coords.lat.toFixed(2),this.lng=t.coords.lng.toFixed(2),this.markers=[],this.markers.push({lat:this.lat,lng:this.lng,draggable:this.draggable}),this.eventToParent.next({lat:this.lat,lng:this.lng}))}},{key:"markerDragEnd",value:function(t,e){console.log(t),this.lat=e.coords.lat.toFixed(2),this.lng=e.coords.lng.toFixed(2),this.eventToParent.next({lat:this.lat,lng:this.lng})}}]),t}()).\u0275fac=function(t){return new(t||ce)},ce.\u0275cmp=a.Jb({type:ce,selectors:[["app-agm-map"]],inputs:{eventToParent:"eventToParent",postitionFromParent:"postitionFromParent",showMarker:"showMarker",lat:"lat",lng:"lng",draggable:"draggable",markers:"markers"},decls:2,vars:6,consts:[[3,"latitude","longitude","zoom","disableDefaultUI","zoomControl","mapClick"],[3,"latitude","longitude","label","markerDraggable","dragEnd","markerClick",4,"ngFor","ngForOf"],[3,"latitude","longitude","label","markerDraggable","dragEnd","markerClick"]],template:function(t,e){1&t&&(a.Vb(0,"agm-map",0),a.dc("mapClick",(function(t){return e.mapClicked(t)})),a.Ac(1,se,1,4,"agm-marker",1),a.Ub()),2&t&&(a.mc("latitude",e.lat)("longitude",e.lng)("zoom",e.zoom)("disableDefaultUI",!1)("zoomControl",!1),a.Cb(1),a.mc("ngForOf",e.markers))},directives:[Xt,r.j,Yt],styles:["agm-map[_ngcontent-%COMP%]{height:100%}*[_ngcontent-%COMP%]{font-family:Lato}a[_ngcontent-%COMP%]{color:#00008b}#map[_ngcontent-%COMP%]{height:100%}"]}),ce),he=n("Dh3D"),pe=((ue=function(){function t(e,n,i,r){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.fb=i,this.uow=r,this.title="",this.currentPosition=new a.o,this.eventFromMap=new a.o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.o=this.data.model,this.title=this.data.title,console.log(this.o),this.createForm(),this.o.id?setTimeout((function(){return t.currentPosition.next({lat:t.o.lat,lng:t.o.lng})}),50):setTimeout((function(){return t.currentPosition.next({lat:48.86,lng:2.39})}),50),this.eventFromMap.subscribe((function(e){t.myForm.get("lat").setValue(e.lat),t.myForm.get("lng").setValue(e.lng)}))}},{key:"ngAfterViewInit",value:function(){}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"onOkClick",value:function(t){var e=this;null===t.id?this.uow.etaps.post(t).subscribe((function(n){e.dialogRef.close(t)})):this.uow.etaps.put(t.id,t).subscribe((function(n){e.dialogRef.close(t)}))}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:this.o.id,adresse:[this.o.adresse,s.t.required],lat:[this.o.lat,s.t.required],lng:[this.o.lng,s.t.required],parcoursId:[this.o.parcoursId,s.t.required]})}},{key:"resetForm",value:function(){this.o=new q.a,this.createForm()}}]),t}()).\u0275fac=function(t){return new(t||ue)(a.Pb(l.g),a.Pb(l.a),a.Pb(s.d),a.Pb(f.a))},ue.\u0275cmp=a.Jb({type:ue,selectors:[["app-add-etap"]],decls:30,vars:6,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[3,"formGroup"],["appearance","fill",1,"col-md-12"],["rows","4","matInput","","formControlName","adresse","required",""],["appearance","fill",1,"col-md-6"],["matInput","","formControlName","lat","type","number","readonly",""],["matInput","","formControlName","lng","type","number","readonly",""],[1,"col-md-12"],[2,"height","40vh"],[3,"postitionFromParent","eventToParent","draggable"],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],["mat-raised-button","","cdkFocusInitial","","color","primary",3,"disabled","click"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Vb(2,"mat-toolbar",2),a.Vb(3,"span"),a.Bc(4),a.Ub(),a.Ub(),a.Qb(5,"mat-divider"),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"div",4),a.Vb(8,"form",5),a.Vb(9,"mat-form-field",6),a.Vb(10,"mat-label"),a.Bc(11,"adresse"),a.Ub(),a.Qb(12,"textarea",7),a.Ub(),a.Vb(13,"mat-form-field",8),a.Vb(14,"mat-label"),a.Bc(15,"lat"),a.Ub(),a.Qb(16,"input",9),a.Ub(),a.Vb(17,"mat-form-field",8),a.Vb(18,"mat-label"),a.Bc(19,"lng"),a.Ub(),a.Qb(20,"input",10),a.Ub(),a.Vb(21,"div",11),a.Vb(22,"mat-card",12),a.Qb(23,"app-agm-map",13),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(24,"div",14),a.Vb(25,"button",15),a.dc("click",(function(t){return e.onNoClick()})),a.Bc(26,"Annuler"),a.Ub(),a.Bc(27,"\xa0\xa0 "),a.Vb(28,"button",16),a.dc("click",(function(t){return e.onOkClick(e.myForm.value)})),a.Bc(29,"Enregistre"),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Cb(4),a.Cc(e.title),a.Cb(4),a.mc("formGroup",e.myForm),a.Cb(15),a.mc("postitionFromParent",e.currentPosition)("eventToParent",e.eventFromMap)("draggable",!0),a.Cb(5),a.mc("disabled",e.myForm.invalid))},directives:[l.h,d.a,h.a,l.e,s.u,s.o,s.h,g.b,g.e,v.b,s.b,s.n,s.g,s.s,s.q,m.a,de,l.c,p.a],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}"]}),ue),be=n("3E0/"),fe=((le=function(){function t(e){_classCallCheck(this,t),this.dialog=e}return _createClass(t,[{key:"openDialog",value:function(t){return this.dialog.open(b,{width:"750px",disableClose:!0,data:{model:t}}).afterClosed()}}]),t}()).\u0275fac=function(t){return new(t||le)(a.Zb(l.b))},le.\u0275prov=a.Lb({token:le,factory:le.\u0275fac,providedIn:"root"}),le),me=n("+0xr"),ge=n("Xa2L");function ve(t,e){if(1&t){var n=a.Wb();a.Vb(0,"button",35),a.dc("click",(function(t){a.tc(n);var e=a.hc().index;return a.hc().removeAt(e)})),a.Vb(1,"mat-icon"),a.Bc(2,"delete"),a.Ub(),a.Ub()}}function ke(t,e){if(1&t&&(a.Vb(0,"div",31),a.Vb(1,"mat-form-field",32),a.Vb(2,"mat-label"),a.Bc(3),a.Ub(),a.Qb(4,"input",33),a.Ub(),a.Bc(5," \xa0 "),a.Ac(6,ve,3,0,"button",34),a.Ub()),2&t){var n=e.index;a.mc("formGroupName",n),a.Cb(3),a.Dc("Choix ",n+1,""),a.Cb(3),a.mc("ngIf",n>0)}}function ye(t,e){1&t&&a.Qb(0,"mat-spinner")}function _e(t,e){if(1&t&&(a.Vb(0,"div",36),a.Ac(1,ye,1,0,"mat-spinner",37),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.mc("ngIf",n.isLoadingResults)}}function Ce(t,e){if(1&t&&(a.Vb(0,"th",38),a.Bc(1),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.Cc(n.columnDefs[0].headName)}}function we(t,e){if(1&t&&(a.Vb(0,"td",39),a.Bc(1),a.Ub()),2&t){var n=e.$implicit,i=a.hc();a.Cb(1),a.Cc(n[i.columnDefs[0].columnDef])}}function Oe(t,e){if(1&t&&(a.Vb(0,"th",38),a.Bc(1),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.Cc(n.columnDefs[1].headName)}}function Pe(t,e){if(1&t&&(a.Vb(0,"td",39),a.Bc(1),a.Ub()),2&t){var n=e.$implicit,i=a.hc();a.Cb(1),a.Cc(n[i.columnDefs[1].columnDef])}}function xe(t,e){if(1&t&&(a.Vb(0,"th",38),a.Bc(1),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.Cc(n.columnDefs[2].headName)}}function Me(t,e){if(1&t&&(a.Vb(0,"td",39),a.Bc(1),a.Ub()),2&t){var n=e.$implicit,i=a.hc();a.Cb(1),a.Cc(n[i.columnDefs[2].columnDef])}}function Ve(t,e){1&t&&a.Qb(0,"th",40)}function Ie(t,e){if(1&t){var n=a.Wb();a.Vb(0,"td",39),a.Vb(1,"div",41),a.Vb(2,"button",42),a.dc("click",(function(t){a.tc(n);var i=e.$implicit;return a.hc().edit(i)})),a.Vb(3,"mat-icon"),a.Bc(4,"create"),a.Ub(),a.Ub(),a.Vb(5,"button",43),a.dc("click",(function(t){a.tc(n);var i=e.$implicit;return a.hc().delete(i)})),a.Vb(6,"mat-icon"),a.Bc(7,"delete_sweep"),a.Ub(),a.Ub(),a.Ub(),a.Ub()}}function Ue(t,e){1&t&&a.Qb(0,"tr",44)}function ze(t,e){1&t&&a.Qb(0,"tr",45)}var Ae,De=function(){return[10,25,50,100,250]},Be=((Ae=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this.uow=e,this.mydialog=n,this.fb=i,this.dialogRef=r,this.data=o,this.update=new a.o,this.o=new q.c,this.isEdit=!1,this.isLoadingResults=!1,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"question",headName:""},{columnDef:"reponse",headName:""},{columnDef:"choix",headName:""},{columnDef:"option",headName:"OPTION"}].map((function(t){return t.headName=""===t.headName?t.columnDef.toUpperCase():t.headName,t})),this.displayedColumns=this.columnDefs.map((function(t){return t.columnDef})),this.title="",this.idParent=0}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.o=this.data.model,this.title=this.data.title,this.idParent=this.o.etapId,console.log(this.o),this.createForm(),setTimeout((function(){var e=t.o.choix.split(";").map((function(t){return{value:t}}));t.o.id&&(e.pop(),t.choixForm.removeAt(0))}),50),Object(c.a)(this.sort.sortChange,this.paginator.page,this.update).pipe(Object(lt.a)(null),Object(be.a)(0)).subscribe((function(e){!0===e?t.paginator.pageIndex=0:e=e,t.paginator.pageSize?e=e:t.paginator.pageSize=10,t.getPage(t.paginator.pageIndex*t.paginator.pageSize,t.paginator.pageSize,t.sort.active?t.sort.active:"id",t.sort.direction?t.sort.direction:"desc",t.idParent)}))}},{key:"onNoClick",value:function(){this.dialogRef.close()}},{key:"getPage",value:function(t,e,n,i,r){var o=this;this.isLoadingResults=!0,this.uow.quizzs.getAll(t,e,n,i,r).subscribe((function(t){console.log(t),o.dataSource=t[0],o.resultsLength=t[1],o.isLoadingResults=!1}))}},{key:"createForm",value:function(){var t=this;this.myForm=this.fb.group({id:this.o.id,question:[this.o.question,s.t.required],reponse:[this.o.reponse,s.t.required],choix:this.fb.array([{value:""}].map((function(e){return t.fb.group(e)}))),etapId:[this.o.etapId]})}},{key:"add",value:function(){this.choixForm.push(this.fb.group({value:""}))}},{key:"removeAt",value:function(t){this.choixForm.removeAt(t)}},{key:"submit",value:function(t){var e=this;t.choix="",this.choixForm.value.forEach((function(e){return t.choix+="".concat(e.value,";")})),null===t.id?this.uow.quizzs.post(t).subscribe((function(t){return Object(Z.a)(e,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.reset(),this.update.next(!0);case 1:case"end":return t.stop()}}),t,this)})))})):this.uow.quizzs.put(t.id,t).subscribe((function(t){return Object(Z.a)(e,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.reset(),this.update.next(!0);case 1:case"end":return t.stop()}}),t,this)})))}))}},{key:"delete",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mydialog.openDialog("Quizz").toPromise();case 2:if(e.t0=e.sent,e.t1="ok"===e.t0,!e.t1){e.next=6;break}this.uow.quizzs.delete(t.id).subscribe((function(){n.update.next(!0)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"edit",value:function(t){var e=this;this.o=t,this.isEdit=!0;var n=this.o.choix.split(";").map((function(t){return{value:t}}));this.createForm(),n.pop(),this.choixForm.removeAt(0),n.forEach((function(t){return e.choixForm.push(e.fb.group(t))}))}},{key:"reset",value:function(){this.o=new q.c,this.isEdit=!1,this.createForm()}},{key:"choixForm",get:function(){return this.myForm.get("choix")}}]),t}()).\u0275fac=function(t){return new(t||Ae)(a.Pb(f.a),a.Pb(fe),a.Pb(s.d),a.Pb(l.g),a.Pb(l.a))},Ae.\u0275cmp=a.Jb({type:Ae,selectors:[["app-quizz"]],viewQuery:function(t,e){var n;1&t&&(a.yc(u.a,!0),a.yc(he.a,!0)),2&t&&(a.qc(n=a.ec())&&(e.paginator=n.first),a.qc(n=a.ec())&&(e.sort=n.first))},decls:51,vars:14,consts:[[1,"dialog"],["mat-dialog-title",""],["role","toolbar",1,"task-header"],[1,"content"],["mat-dialog-content",""],[1,"mycard"],[3,"formGroup"],["appearance","fill"],["matInput","","formControlName","question","required",""],["matInput","","formControlName","reponse","required",""],["formArrayName","choix",1,"row"],["class","col-md-11",3,"formGroupName",4,"ngFor","ngForOf"],["mat-mini-fab","","color","accent","type","button",2,"margin-top","14px",3,"click"],[1,"actions"],["mat-raised-button","","color","primary",3,"click"],[1,"example-container","mat-elevation-z8","mt-3","mb-3"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","5","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],["mat-dialog-actions","",1,"actions"],["mat-button","","type","button",3,"click"],[1,"col-md-11",3,"formGroupName"],["appearance","fill",1,"col-md-11",2,"padding","0"],["matInput","","formControlName","value","required",""],["mat-mini-fab","",3,"click",4,"ngIf"],["mat-mini-fab","",3,"click"],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"button-row"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"h1",1),a.Vb(2,"mat-toolbar",2),a.Vb(3,"span"),a.Bc(4),a.Ub(),a.Ub(),a.Qb(5,"mat-divider"),a.Ub(),a.Vb(6,"div",3),a.Vb(7,"div",4),a.Vb(8,"div",5),a.Vb(9,"form",6),a.Vb(10,"mat-form-field",7),a.Vb(11,"mat-label"),a.Bc(12,"question"),a.Ub(),a.Qb(13,"textarea",8),a.Ub(),a.Vb(14,"mat-form-field",7),a.Vb(15,"mat-label"),a.Bc(16,"reponse"),a.Ub(),a.Qb(17,"input",9),a.Ub(),a.Vb(18,"div",10),a.Ac(19,ke,7,3,"div",11),a.Vb(20,"button",12),a.dc("click",(function(t){return e.add()})),a.Vb(21,"mat-icon"),a.Bc(22,"add"),a.Ub(),a.Ub(),a.Ub(),a.Vb(23,"div",13),a.Vb(24,"button",14),a.dc("click",(function(t){return e.submit(e.myForm.value)})),a.Vb(25,"mat-icon"),a.Bc(26),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(27,"div",15),a.Ac(28,_e,2,1,"div",16),a.Vb(29,"div",17),a.Vb(30,"table",18,19),a.Tb(32,20),a.Ac(33,Ce,2,1,"th",21),a.Ac(34,we,2,1,"td",22),a.Sb(),a.Tb(35,20),a.Ac(36,Oe,2,1,"th",21),a.Ac(37,Pe,2,1,"td",22),a.Sb(),a.Tb(38,20),a.Ac(39,xe,2,1,"th",21),a.Ac(40,Me,2,1,"td",22),a.Sb(),a.Tb(41,23),a.Ac(42,Ve,1,0,"th",24),a.Ac(43,Ie,8,0,"td",22),a.Sb(),a.Ac(44,Ue,1,0,"tr",25),a.Ac(45,ze,1,0,"tr",26),a.Ub(),a.Ub(),a.Qb(46,"mat-paginator",27,28),a.Ub(),a.Ub(),a.Vb(48,"div",29),a.Vb(49,"button",30),a.dc("click",(function(t){return e.onNoClick()})),a.Bc(50,"Retour"),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Cb(4),a.Cc(e.title),a.Cb(5),a.mc("formGroup",e.myForm),a.Cb(10),a.mc("ngForOf",e.choixForm.controls),a.Cb(7),a.Cc(e.isEdit?"create":"add"),a.Cb(2),a.mc("ngIf",e.isLoadingResults),a.Cb(2),a.mc("dataSource",e.dataSource),a.Cb(2),a.mc("matColumnDef",e.columnDefs[0].columnDef),a.Cb(3),a.mc("matColumnDef",e.columnDefs[1].columnDef),a.Cb(3),a.mc("matColumnDef",e.columnDefs[2].columnDef),a.Cb(6),a.mc("matHeaderRowDef",e.displayedColumns),a.Cb(1),a.mc("matRowDefColumns",e.displayedColumns),a.Cb(1),a.mc("length",e.resultsLength)("pageSizeOptions",a.nc(13,De)))},directives:[l.h,d.a,h.a,l.e,s.u,s.o,s.h,g.b,g.e,v.b,s.b,s.n,s.g,s.s,s.c,r.j,p.a,k.a,r.k,me.j,he.a,me.c,me.e,me.b,me.g,me.i,u.a,l.c,s.i,ge.b,me.d,he.b,me.a,me.f,me.h],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}.dialog[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:hidden}.dialog[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:0 5px}.dialog[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{padding:0 20px 25px}.dialog[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse}"]}),Ae);function Le(t,e){1&t&&a.Qb(0,"mat-spinner")}function Te(t,e){if(1&t&&(a.Vb(0,"div",17),a.Ac(1,Le,1,0,"mat-spinner",18),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.mc("ngIf",n.isLoadingResults)}}function Se(t,e){if(1&t&&(a.Vb(0,"th",19),a.Bc(1),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.Cc(n.columnDefs[0].headName)}}function We(t,e){if(1&t&&(a.Vb(0,"td",20),a.Bc(1),a.Ub()),2&t){var n=e.$implicit,i=a.hc();a.Cb(1),a.Cc(n[i.columnDefs[0].columnDef])}}function Re(t,e){if(1&t&&(a.Vb(0,"th",19),a.Bc(1),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.Cc(n.columnDefs[1].headName)}}function Ee(t,e){if(1&t&&(a.Vb(0,"td",20),a.Bc(1),a.Ub()),2&t){var n=e.$implicit,i=a.hc();a.Cb(1),a.Cc(n[i.columnDefs[1].columnDef])}}function je(t,e){if(1&t&&(a.Vb(0,"th",19),a.Bc(1),a.Ub()),2&t){var n=a.hc();a.Cb(1),a.Cc(n.columnDefs[2].headName)}}function Fe(t,e){if(1&t&&(a.Vb(0,"td",20),a.Bc(1),a.Ub()),2&t){var n=e.$implicit,i=a.hc();a.Cb(1),a.Cc(n[i.columnDefs[2].columnDef])}}function Ne(t,e){1&t&&a.Qb(0,"th",21)}function Qe(t,e){if(1&t){var n=a.Wb();a.Vb(0,"td",20),a.Vb(1,"div",22),a.Vb(2,"button",23),a.dc("click",(function(t){a.tc(n);var i=e.$implicit;return a.hc().edit(i)})),a.Vb(3,"mat-icon"),a.Bc(4,"create"),a.Ub(),a.Ub(),a.Vb(5,"button",23),a.dc("click",(function(t){a.tc(n);var i=e.$implicit;return a.hc().addQuizz(i)})),a.Vb(6,"mat-icon"),a.Bc(7,"question_answer"),a.Ub(),a.Ub(),a.Vb(8,"button",24),a.dc("click",(function(t){a.tc(n);var i=e.$implicit;return a.hc().delete(i)})),a.Vb(9,"mat-icon"),a.Bc(10,"delete_sweep"),a.Ub(),a.Ub(),a.Ub(),a.Ub()}}function Ze(t,e){1&t&&a.Qb(0,"tr",25)}function qe(t,e){1&t&&a.Qb(0,"tr",26)}var $e,He,Je,Ge=function(){return[10,25,50,100,250]},Xe=(($e=function(){function t(e,n,i,r,o){_classCallCheck(this,t),this.uow=e,this.dialog=n,this.mydialog=i,this.url=r,this.fb=o,this.parentObject=new q.b,this.objectFromParcoursComponent=new a.o,this.update=new a.o,this.o=new q.a,this.isLoadingResults=!1,this.resultsLength=0,this.isRateLimitReached=!1,this.dataSource=[],this.columnDefs=[{columnDef:"adresse",headName:""},{columnDef:"lat",headName:""},{columnDef:"lng",headName:""},{columnDef:"option",headName:"OPTION"}].map((function(t){return t.headName=""===t.headName?t.columnDef.toUpperCase():t.headName,t})),this.displayedColumns=this.columnDefs.map((function(t){return t.columnDef}))}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.objectFromParcoursComponent.subscribe((function(e){t.parentObject=e,console.log(e),t.createForm(),Object(c.a)(t.sort.sortChange,t.paginator.page,t.update).pipe(Object(lt.a)(null)).subscribe((function(e){!0===e?t.paginator.pageIndex=0:e=e,t.paginator.pageSize?e=e:t.paginator.pageSize=10;var n=t.paginator.pageIndex*t.paginator.pageSize;console.log(t.parentObject.id),t.getPage(n,t.paginator.pageSize,t.sort.active?t.sort.active:"id",t.sort.direction?t.sort.direction:"desc",t.parentObject.id)}))}))}},{key:"getPage",value:function(t,e,n,i,r){var o=this;this.isLoadingResults=!0,this.uow.etaps.getAll(t,e,n,i,r).subscribe((function(t){console.log(t),o.dataSource=t[0],o.resultsLength=t[1],o.isLoadingResults=!1}))}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:this.o.id,adresse:[this.o.adresse,s.t.required],lat:[this.o.lat,s.t.required],lng:[this.o.lng,s.t.required],parcoursId:[this.parentObject.id]})}},{key:"openDialog",value:function(t,e){return this.dialog.open(pe,{width:"750px",disableClose:!0,data:{model:t,title:e}}).afterClosed()}},{key:"add",value:function(){var t=this,e=new q.a;e.lat=48.86,e.lng=2.39,e.parcoursId=this.parentObject.id,this.openDialog(e,"Ajouter Etap").subscribe((function(e){e&&(console.log(e),t.update.next(!0))}))}},{key:"edit",value:function(t){var e=this;this.openDialog(t,"Modifier Etap").subscribe((function(t){t&&(console.log(t),e.update.next(!0))}))}},{key:"delete",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.mydialog.openDialog("Etap").toPromise();case 2:if(e.t0=e.sent,e.t1="ok"===e.t0,!e.t1){e.next=6;break}this.uow.etaps.delete(t.id).subscribe((function(){n.update.next(!0)}));case 6:case"end":return e.stop()}}),e,this)})))}},{key:"addQuizz",value:function(t){var e=new q.c;e.etapId=t.id,this.dialog.open(Be,{width:"750px",disableClose:!0,data:{model:e,title:"Quizz"}})}},{key:"disableAdd",get:function(){return null===this.parentObject.id}}]),t}()).\u0275fac=function(t){return new(t||$e)(a.Pb(f.a),a.Pb(l.b),a.Pb(fe),a.Pb("BASE_URL"),a.Pb(s.d))},$e.\u0275cmp=a.Jb({type:$e,selectors:[["app-etap"]],viewQuery:function(t,e){var n;1&t&&(a.yc(u.a,!0),a.yc(he.a,!0)),2&t&&(a.qc(n=a.ec())&&(e.paginator=n.first),a.qc(n=a.ec())&&(e.sort=n.first))},inputs:{objectFromParcoursComponent:"objectFromParcoursComponent"},decls:27,vars:11,consts:[[1,"host"],[1,"right"],["mat-raised-button","","color","primary",1,"mt-3",2,"margin","20px 0",3,"disabled","click"],[1,"example-container","mat-elevation-z8"],["class","example-loading-shade",4,"ngIf"],[1,"example-table-container"],["mat-table","","multiTemplateDataRows","","aria-label","Elements","matSort","",3,"dataSource"],["table",""],[3,"matColumnDef"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","option",2,"flex-direction","row-reverse"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["pageIndex","0","pageSize","5","showFirstLastButtons","",3,"length","pageSizeOptions"],["paginator",""],[1,"example-loading-shade"],[4,"ngIf"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[1,"button-row"],["mat-icon-button","","color","primary",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"div",1),a.Vb(2,"button",2),a.dc("click",(function(t){return e.add()})),a.Vb(3,"mat-icon"),a.Bc(4,"add"),a.Ub(),a.Bc(5," Etap "),a.Ub(),a.Ub(),a.Vb(6,"div",3),a.Ac(7,Te,2,1,"div",4),a.Vb(8,"div",5),a.Vb(9,"table",6,7),a.Tb(11,8),a.Ac(12,Se,2,1,"th",9),a.Ac(13,We,2,1,"td",10),a.Sb(),a.Tb(14,8),a.Ac(15,Re,2,1,"th",9),a.Ac(16,Ee,2,1,"td",10),a.Sb(),a.Tb(17,8),a.Ac(18,je,2,1,"th",9),a.Ac(19,Fe,2,1,"td",10),a.Sb(),a.Tb(20,11),a.Ac(21,Ne,1,0,"th",12),a.Ac(22,Qe,11,0,"td",10),a.Sb(),a.Ac(23,Ze,1,0,"tr",13),a.Ac(24,qe,1,0,"tr",14),a.Ub(),a.Ub(),a.Qb(25,"mat-paginator",15,16),a.Ub(),a.Ub()),2&t&&(a.Cb(2),a.mc("disabled",e.disableAdd),a.Cb(5),a.mc("ngIf",e.isLoadingResults),a.Cb(2),a.mc("dataSource",e.dataSource),a.Cb(2),a.mc("matColumnDef",e.columnDefs[0].columnDef),a.Cb(3),a.mc("matColumnDef",e.columnDefs[1].columnDef),a.Cb(3),a.mc("matColumnDef",e.columnDefs[2].columnDef),a.Cb(6),a.mc("matHeaderRowDef",e.displayedColumns),a.Cb(1),a.mc("matRowDefColumns",e.displayedColumns),a.Cb(1),a.mc("length",e.resultsLength)("pageSizeOptions",a.nc(10,Ge)))},directives:[p.a,k.a,r.k,me.j,he.a,me.c,me.e,me.b,me.g,me.i,u.a,ge.b,me.d,he.b,me.a,me.f,me.h],styles:[""]}),$e),Ke=function(){return["/admin/article/list"]},Ye=((Je=function(){function t(e,n,i,r,o,s){_classCallCheck(this,t),this.route=e,this.snack=n,this.uow=i,this.fb=r,this.session=o,this.router=s,this.o=new q.b,this.id=0,this.sendObjectToEtapComponent=new a.o,this.currentPosition=new a.o,this.eventFromMap=new a.o}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.createForm(),this.route.params.subscribe((function(e){console.log(e.id),t.id=+e.id,0!==t.id?t.uow.parcours.getOne(t.id).subscribe((function(e){t.o=e,t.createForm(),t.sendObjectToEtapComponent.next(t.o),t.currentPosition.next({lat:t.o.lat,lng:t.o.lng})})):(t.o=new q.b,t.createForm(),t.sendObjectToEtapComponent.next(t.o),t.currentPosition.next({lat:48.86,lng:2.39}))})),this.eventFromMap.subscribe((function(e){t.myForm.get("lat").setValue(e.lat),t.myForm.get("lng").setValue(e.lng)}))}},{key:"createForm",value:function(){this.myForm=this.fb.group({id:this.o.id,titre:[this.o.titre,s.t.required],image:[this.o.image,s.t.required],descriptif:[this.o.descriptif,s.t.required],temps:[this.o.temps,s.t.required],lat:[this.o.lat,s.t.required],lng:[this.o.lng,s.t.required]})}},{key:"submit",value:function(t){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===this.id?this.uow.parcours.post(t).subscribe((function(t){return Object(Z.a)(n,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.o=t,this.sendObjectToEtapComponent.next(this.o);case 1:case"end":return e.stop()}}),e,this)})))})):this.uow.parcours.put(t.id,t).subscribe((function(t){return Object(Z.a)(n,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})))}));case 1:case"end":return e.stop()}}),e,this)})))}}]),t}()).\u0275fac=function(t){return new(t||Je)(a.Pb(o.a),a.Pb($.a),a.Pb(f.a),a.Pb(s.d),a.Pb(B.a),a.Pb(o.d))},Je.\u0275cmp=a.Jb({type:Je,selectors:[["app-parcours"]],decls:40,vars:8,consts:[["title","Parcours"],[3,"formGroup"],[1,"row"],[1,"col-md-6","mt-3"],["appearance","fill",1,"col-md-12"],["matInput","","formControlName","titre","required",""],["appearance","fill",1,"col-md-6"],["matInput","","formControlName","image","required",""],["matInput","","formControlName","temps","type","number","required",""],["matInput","","formControlName","lat","type","number","readonly",""],["matInput","","formControlName","lng","type","number","readonly",""],["matInput","","formControlName","descriptif","required",""],[1,"col-md-6"],[2,"height","40vh"],[3,"postitionFromParent","eventToParent","draggable"],[1,"actions"],["mat-button","","type","button",3,"routerLink"],["mat-raised-button","","color","primary",3,"disabled","click"],[1,"mb-3"],[3,"objectFromParcoursComponent"]],template:function(t,e){1&t&&(a.Vb(0,"mat-card"),a.Qb(1,"app-title",0),a.Vb(2,"form",1),a.Vb(3,"div",2),a.Vb(4,"div",3),a.Vb(5,"mat-form-field",4),a.Vb(6,"mat-label"),a.Bc(7,"titre"),a.Ub(),a.Qb(8,"input",5),a.Ub(),a.Vb(9,"mat-form-field",6),a.Vb(10,"mat-label"),a.Bc(11,"image"),a.Ub(),a.Qb(12,"input",7),a.Ub(),a.Vb(13,"mat-form-field",6),a.Vb(14,"mat-label"),a.Bc(15,"temps"),a.Ub(),a.Qb(16,"input",8),a.Ub(),a.Vb(17,"mat-form-field",6),a.Vb(18,"mat-label"),a.Bc(19,"lat"),a.Ub(),a.Qb(20,"input",9),a.Ub(),a.Vb(21,"mat-form-field",6),a.Vb(22,"mat-label"),a.Bc(23,"lng"),a.Ub(),a.Qb(24,"input",10),a.Ub(),a.Vb(25,"mat-form-field",4),a.Vb(26,"mat-label"),a.Bc(27,"descriptif"),a.Ub(),a.Qb(28,"textarea",11),a.Ub(),a.Ub(),a.Vb(29,"div",12),a.Vb(30,"mat-card",13),a.Qb(31,"app-agm-map",14),a.Ub(),a.Ub(),a.Ub(),a.Vb(32,"div",15),a.Vb(33,"button",16),a.Bc(34,"Retour"),a.Ub(),a.Bc(35,"\xa0\xa0 "),a.Vb(36,"button",17),a.dc("click",(function(t){return e.submit(e.myForm.value)})),a.Bc(37,"Enregistre "),a.Ub(),a.Ub(),a.Qb(38,"mat-divider",18),a.Qb(39,"app-etap",19),a.Ub(),a.Ub()),2&t&&(a.Cb(2),a.mc("formGroup",e.myForm),a.Cb(29),a.mc("postitionFromParent",e.currentPosition)("eventToParent",e.eventFromMap)("draggable",!0),a.Cb(2),a.mc("routerLink",a.nc(7,Ke)),a.Cb(3),a.mc("disabled",e.myForm.invalid),a.Cb(3),a.mc("objectFromParcoursComponent",e.sendObjectToEtapComponent))},directives:[m.a,H,s.u,s.o,s.h,g.b,g.e,v.b,s.b,s.n,s.g,s.s,s.q,de,p.a,o.e,h.a,Xe],styles:[".mycard[_ngcontent-%COMP%]{margin:15px 15px 0}.actions[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;flex-direction:row-reverse;margin:30px 0}"]}),Je),tn=((He=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||He)},He.\u0275cmp=a.Jb({type:He,selectors:[["app-update-shared"]],decls:1,vars:0,template:function(t,e){1&t&&a.Qb(0,"app-parcours")},directives:[Ye],styles:[""]}),He);function en(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div"),a.Vb(1,"button",14),a.dc("click",(function(t){a.tc(n);var i=e.$implicit,r=a.hc().$implicit;return a.hc(2).doRespond(i,r)})),a.Bc(2),a.Ub(),a.Ub()}if(2&t){var i=e.$implicit,r=a.hc().$implicit,o=a.hc(2);a.Cb(1),a.mc("color",o.answer(i,r).color),a.Cb(1),a.Ec(" ",i," ",o.answer(i,r).text," ")}}function nn(t,e){if(1&t&&(a.Vb(0,"mat-card"),a.Vb(1,"mat-form-field",12),a.Vb(2,"mat-label"),a.Bc(3,"Question"),a.Ub(),a.Qb(4,"textarea",13),a.Ub(),a.Ac(5,en,3,3,"div",11),a.Ub()),2&t){var n=e.$implicit,i=a.hc(2);a.Cb(4),a.mc("value",n.question),a.Cb(1),a.mc("ngForOf",i.splite(n.choix))}}function rn(t,e){if(1&t&&(a.Vb(0,"mat-card",2),a.Vb(1,"mat-form-field",9),a.Vb(2,"mat-label"),a.Bc(3),a.Ub(),a.Qb(4,"input",10),a.Ub(),a.Ac(5,nn,6,2,"mat-card",11),a.Ub()),2&t){var n=e.$implicit,i=e.index;a.Cb(3),a.Dc("Etap ",i," : Adresse"),a.Cb(1),a.mc("value",n.adresse),a.Cb(1),a.mc("ngForOf",n.quizzs)}}var on,an,sn,cn,un,ln,dn=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:F,children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:A},{path:"created",component:D},{path:"account",component:N.a},{path:"followed",component:Q},{path:"update/:id",component:(an=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"ngOnInit",value:function(){}}]),t}(),an.\u0275fac=function(t){return new(t||an)},an.\u0275cmp=a.Jb({type:an,selectors:[["app-update"]],decls:1,vars:0,template:function(t,e){1&t&&a.Qb(0,"app-update-shared")},directives:[tn],styles:[""]}),an)},{path:"detail/:id",component:(on=function(){function t(e,n,i,r){_classCallCheck(this,t),this.uow=e,this.route=n,this.session=i,this.snackBar=r,this.id=0,this.o=new q.b,this.currentPosition=new a.o,this.disable=!1}return _createClass(t,[{key:"ngOnInit",value:function(){var t=this;this.id=+this.route.snapshot.paramMap.get("id"),this.uow.parcours.getOne(this.id).subscribe((function(e){t.o=e,console.log(t.o),t.currentPosition.next({lat:t.o.lat,lng:t.o.lng}),t.o.etaps.forEach((function(e){t.currentPosition.next({lat:e.lat,lng:e.lng})}))}))}},{key:"response",value:function(t){console.log(t)}},{key:"splite",value:function(t){var e=t.split(";");return e.pop(),e}},{key:"doRespond",value:function(t,e){return Object(Z.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((i=0!==e.reponses.length?e.reponses[0]:new q.d).reponse=t,i.quizzId=e.id,i.userId=this.session.user.id,!(0!==i.id&&this.diff_minute(new Date,i.date)<1)){n.next=3;break}return n.abrupt("return",(this.snackBar.notifyAlert(1,"Vous devez au mois attendre une minute pour modifie ton reponse"),void(this.disable=!0)));case 3:return this.disable=!1,console.log(0!==i.id,this.diff_minute(new Date,i.date)),i.date=new Date,n.next=8,this.uow.reponces.post(i).toPromise();case 8:return n.next=10,this.uow.parcours.getOne(this.id).toPromise();case 10:this.o=n.sent;case 11:case"end":return n.stop()}}),n,this)})))}},{key:"answer",value:function(t,e){return 0!==e.reponses.length?t!==e.reponses[0].reponse?{color:"primary",text:""}:e.reponses[0].reponse===e.reponse?{color:"accent",text:", reponse correcte : "+e.reponse}:{color:"warn",text:", reponse correcte : "+e.reponse}:{color:"primary",text:""}}},{key:"diff_minute",value:function(t,e){var n=(t.valueOf()-new Date(e).valueOf())/1e3/60;return Math.abs(Math.round(n))}}]),t}(),on.\u0275fac=function(t){return new(t||on)(a.Pb(f.a),a.Pb(o.a),a.Pb(B.a),a.Pb($.a))},on.\u0275cmp=a.Jb({type:on,selectors:[["app-detail"]],decls:22,vars:5,consts:[[1,"container"],[1,"row"],[1,"col-md-6"],["alt","","srcset","",2,"width","100%",3,"src"],[1,"col-md-12"],[2,"height","40vh"],[3,"postitionFromParent"],["class","col-md-6",4,"ngFor","ngForOf"],["mat-button",""],["appearance","fill",1,"col-md-12"],["matInput","","type","number","readonly","",3,"value"],[4,"ngFor","ngForOf"],["appearance","fill",2,"width","100%"],["matInput","","readonly","",3,"value"],["mat-raised-button","",2,"width","100%","margin","3px 0",3,"color","click"]],template:function(t,e){1&t&&(a.Vb(0,"div",0),a.Vb(1,"mat-card"),a.Vb(2,"mat-card-header"),a.Vb(3,"mat-card-title"),a.Bc(4),a.Ub(),a.Vb(5,"mat-card-subtitle"),a.Bc(6,"subtitle"),a.Ub(),a.Ub(),a.Vb(7,"mat-card-content"),a.Vb(8,"div",1),a.Vb(9,"div",2),a.Qb(10,"img",3),a.Ub(),a.Vb(11,"div",2),a.Vb(12,"p"),a.Bc(13),a.Ub(),a.Vb(14,"div",4),a.Vb(15,"mat-card",5),a.Qb(16,"app-agm-map",6),a.Ub(),a.Ub(),a.Ub(),a.Ub(),a.Vb(17,"div",1),a.Ac(18,rn,6,3,"mat-card",7),a.Ub(),a.Ub(),a.Vb(19,"mat-card-actions"),a.Vb(20,"button",8),a.Bc(21,"Ok"),a.Ub(),a.Ub(),a.Ub(),a.Ub()),2&t&&(a.Cb(4),a.Cc(e.o.titre),a.Cb(6),a.mc("src",e.o.image,a.vc),a.Cb(3),a.Dc(" ",e.o.descriptif," "),a.Cb(3),a.mc("postitionFromParent",e.currentPosition),a.Cb(2),a.mc("ngForOf",e.o.etaps))},directives:[m.a,m.d,m.g,m.f,m.c,de,r.j,m.b,p.a,g.b,g.e,v.b],styles:[""]}),on)}]}],hn=((sn=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:sn}),sn.\u0275inj=a.Mb({factory:function(t){return new(t||sn)},imports:[[o.g.forChild(dn)],o.g]}),sn),pn=n("tk/3"),bn=n("2thQ"),fn=((ln=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:ln}),ln.\u0275inj=a.Mb({factory:function(t){return new(t||ln)},imports:[[r.c,bn.a]]}),ln),mn=((un=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:un}),un.\u0275inj=a.Mb({factory:function(t){return new(t||un)},imports:[[r.c,ae.forRoot({apiKey:"AIzaSyDm1sMO4dR7OrZWe5Ten0_Ol2p7QXdsjwo "})]]}),un),gn=((cn=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:cn}),cn.\u0275inj=a.Mb({factory:function(t){return new(t||cn)},imports:[[o.g,r.c,s.j,s.r,pn.c,bn.a,fn,mn]]}),cn);n.d(e,"HomeModule",(function(){return kn}));var vn,kn=((vn=function t(){_classCallCheck(this,t)}).\u0275mod=a.Nb({type:vn}),vn.\u0275inj=a.Mb({factory:function(t){return new(t||vn)},imports:[[r.c,hn,s.j,s.r,pn.c,bn.a,gn,fn,mn]]}),vn)}}]);