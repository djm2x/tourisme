(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{Yj9t:function(t,e,r){"use strict";r.r(e);var i=r("ofXK"),n=r("tyNb"),o=r("mrSG"),a=r("3Pt+"),s=r("ukCm"),c=r("fXoL"),l=r("7q3A"),b=r("M0ag"),m=r("dNgK"),u=r("Xa2L");let d=(()=>{class t{constructor(t){this.snackBar=t,this.afterDismissed=()=>this.snackBarRef.afterDismissed(),this.onAction=()=>this.snackBarRef.onAction(),this.dismiss=()=>this.snackBarRef.dismiss()}openMySnackBar(t,e){this.snackBarRef=this.snackBar.openFromComponent(p,{panelClass:["customClass"],data:t})}openSnackBar(t,e="close"){this.snackBarRef=this.snackBar.open(t,e,{duration:1e4})}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(m.b))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),p=(()=>{class t{constructor(t){this.data=t}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(m.a))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-snack-bar"]],decls:4,vars:1,consts:[[1,"row"],["color","warn","diameter","27",1,"custom-spinner"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"p"),c.Dc(2),c.Ub(),c.Qb(3,"mat-spinner",1),c.Ub()),2&t&&(c.Cb(2),c.Ec(e.data))},directives:[u.b],styles:[".row[_ngcontent-%COMP%] {\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    }"]}),t})();var h=r("pLZG"),f=r("Zy1z"),g=r("lJxs");let w=(()=>{class t{constructor(t){this.router=t,this.previousUrl="/home",this.last2()}last(){return this.router.events.pipe(Object(h.a)(t=>t instanceof n.i),Object(f.a)(),Object(g.a)(t=>`${window.origin}${t[0].urlAfterRedirects}`)).toPromise()}last2(){this.router.events.pipe(Object(h.a)(t=>t instanceof n.i),Object(f.a)()).subscribe(t=>{this.previousUrl=`${t[0].urlAfterRedirects}`,console.log(this.previousUrl)})}}return t.\u0275fac=function(e){return new(e||t)(c.Zb(n.d))},t.\u0275prov=c.Lb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=r("Wp6s"),y=r("kmnG"),v=r("qFsG"),x=r("NFeN"),C=r("bTqV");function U(t,e){1&t&&(c.Vb(0,"mat-error"),c.Dc(1,"Email non valide"),c.Ub())}const P=function(){return["/auth/create"]};let V=(()=>{class t{constructor(t,e,r,i,n,o){this.fb=t,this.uow=e,this.router=r,this.session=i,this.snackbar=n,this.route=o,this.displayedColumns=["email","password","profil"],this.dataSource=[{email:"mourabit@angular.io",password:"123",profil:"Administrateur"},{email:"mehdi@angular.io",password:"123",profil:"Central"},{email:"soufiane@angular.io",password:"123",profil:"Point focal"},{email:"ahmed@angular.io",password:"123",profil:"Metier"}],this.o=new s.e,this.hide=!0,this.previousUrl=`${window.origin}/home`}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){this.o.email="admin@angular.io",this.o.password="123",this.createForm()}))}createForm(){this.myForm=this.fb.group({email:[this.o.email,[a.t.required,a.t.email]],password:[this.o.password,[a.t.required]]})}get email(){return this.myForm.get("email")}get password(){return this.myForm.get("password")}get emailError(){return this.email.hasError("required")?"Vous devez entrer une valeur":this.email.hasError("email")?"Email invalide":""}get passwordError(){return this.password.hasError("required")?"Vous devez entrer une valeur":""}submit(t){this.uow.accounts.login(t).subscribe(t=>Object(o.a)(this,void 0,void 0,(function*(){this.session.doSignIn(t.user,t.token),this.router.navigate(["/home"])})))}resetForm(){this.o=new s.e,this.createForm()}ngOnDestroy(){console.log("ngOnDestroy")}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(a.d),c.Pb(l.a),c.Pb(n.d),c.Pb(b.a),c.Pb(d),c.Pb(w))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-login"]],decls:24,vars:6,consts:[[1,"flex-container"],[1,"flex-item","mat-elevation-z8"],[3,"formGroup","ngSubmit"],[1,"systeme"],[1,"example-container","mtb-2","text-center"],["appearance","fill"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["mat-raised-button","","color","primary","type","submit"],["mat-raised-button","","color","accent","type","button",3,"routerLink"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"mat-card",1),c.Vb(2,"form",2),c.dc("ngSubmit",(function(t){return e.submit(e.myForm.value)})),c.Vb(3,"mat-card-content"),c.Vb(4,"p",3),c.Dc(5,"Bienvenue"),c.Ub(),c.Vb(6,"div",4),c.Vb(7,"mat-form-field",5),c.Vb(8,"mat-label"),c.Dc(9,"Email"),c.Ub(),c.Qb(10,"input",6),c.Bc(11,U,2,0,"mat-error",7),c.Ub(),c.Vb(12,"mat-form-field",5),c.Vb(13,"mat-label"),c.Dc(14,"Mot de passe"),c.Ub(),c.Qb(15,"input",8),c.Vb(16,"mat-icon",9),c.dc("click",(function(t){return e.hide=!e.hide})),c.Dc(17),c.Ub(),c.Ub(),c.Qb(18,"br"),c.Vb(19,"button",10),c.Dc(20,"Se connecter"),c.Ub(),c.Qb(21,"br"),c.Vb(22,"button",11),c.Dc(23,"Cr\xe9er un compte"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(2),c.nc("formGroup",e.myForm),c.Cb(9),c.nc("ngIf",e.myForm.get("email").invalid),c.Cb(4),c.nc("type",e.hide?"password":"text"),c.Cb(2),c.Fc("",e.hide?"visibility_off":"visibility"," "),c.Cb(5),c.nc("routerLink",c.oc(5,P)))},directives:[k.a,a.u,a.o,a.h,k.c,y.b,y.e,v.b,a.b,a.n,a.g,i.l,x.a,y.f,C.a,n.e,y.a],styles:[".flex-container[_ngcontent-%COMP%]{background:url(travel.1c21e09476b296b811a4.png) no-repeat;background-size:cover;background-position:50%;padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.flex-item[_ngcontent-%COMP%]{background-color:#fff;height:auto;width:450px;min-width:200px;line-height:20px;font-weight:700;font-size:2em;text-align:center;margin:15px;display:inline-block;border-radius:0}.example-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.img1[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;background-size:cover;height:100%}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{width:auto!important;padding-right:0!important}.logo[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.systeme[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:25px 0 50px;line-height:30px}"]}),t})();function O(t,e){1&t&&(c.Vb(0,"mat-error"),c.Dc(1,"Email non valid\xe9"),c.Ub())}const M=function(){return["/auth/login"]};let F=(()=>{class t{constructor(t,e,r,i,n){this.fb=t,this.uow=e,this.router=r,this.session=i,this.snackbar=n,this.o=new s.e,this.hide=!0}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){this.createForm()}))}createForm(){this.myForm=this.fb.group({firstname:[this.o.firstname,[a.t.required]],lastname:[this.o.lastname,[a.t.required]],email:[this.o.email,[a.t.required,a.t.email]],password:[this.o.password,[a.t.required]],role:[this.o.role,[a.t.required]]})}get email(){return this.myForm.get("email")}get password(){return this.myForm.get("password")}get emailError(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}get passwordError(){return this.password.hasError("required")?"You must enter a value":""}submit(t){this.uow.accounts.create(t).subscribe(t=>{this.router.navigate(["/auth/login"])})}resetForm(){this.o=new s.e,this.createForm()}}return t.\u0275fac=function(e){return new(e||t)(c.Pb(a.d),c.Pb(l.a),c.Pb(n.d),c.Pb(b.a),c.Pb(d))},t.\u0275cmp=c.Jb({type:t,selectors:[["app-create"]],decls:32,vars:6,consts:[[1,"flex-container"],[1,"flex-item","mat-elevation-z8"],[3,"formGroup","ngSubmit"],[1,"systeme"],[1,"example-container","mtb-2","text-center"],["appearance","fill"],["matInput","","formControlName","firstname"],["matInput","","formControlName","lastname"],["matInput","","formControlName","email","placeholder","Email address"],[4,"ngIf"],["matInput","","formControlName","password","placeholder","Mot de passe",3,"type"],["matSuffix","",3,"click"],["mat-raised-button","","color","accent","type","submit"],["mat-raised-button","","color","primary","type","button",3,"routerLink"]],template:function(t,e){1&t&&(c.Vb(0,"div",0),c.Vb(1,"mat-card",1),c.Vb(2,"form",2),c.dc("ngSubmit",(function(t){return e.submit(e.myForm.value)})),c.Vb(3,"mat-card-content"),c.Vb(4,"p",3),c.Dc(5,"S'enregistrer"),c.Ub(),c.Vb(6,"div",4),c.Vb(7,"mat-form-field",5),c.Vb(8,"mat-label"),c.Dc(9,"Pr\xe9nom"),c.Ub(),c.Qb(10,"input",6),c.Ub(),c.Vb(11,"mat-form-field",5),c.Vb(12,"mat-label"),c.Dc(13,"Nom"),c.Ub(),c.Qb(14,"input",7),c.Ub(),c.Vb(15,"mat-form-field",5),c.Vb(16,"mat-label"),c.Dc(17,"Email"),c.Ub(),c.Qb(18,"input",8),c.Bc(19,O,2,0,"mat-error",9),c.Ub(),c.Vb(20,"mat-form-field",5),c.Vb(21,"mat-label"),c.Dc(22,"Mot de passe"),c.Ub(),c.Qb(23,"input",10),c.Vb(24,"mat-icon",11),c.dc("click",(function(t){return e.hide=!e.hide})),c.Dc(25),c.Ub(),c.Ub(),c.Qb(26,"br"),c.Vb(27,"button",12),c.Dc(28,"Cr\xe9er"),c.Ub(),c.Qb(29,"br"),c.Vb(30,"button",13),c.Dc(31,"Se connecter"),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub(),c.Ub()),2&t&&(c.Cb(2),c.nc("formGroup",e.myForm),c.Cb(17),c.nc("ngIf",e.myForm.get("email").invalid),c.Cb(4),c.nc("type",e.hide?"password":"text"),c.Cb(2),c.Fc("",e.hide?"visibility_off":"visibility"," "),c.Cb(5),c.nc("routerLink",c.oc(5,M)))},directives:[k.a,a.u,a.o,a.h,k.c,y.b,y.e,v.b,a.b,a.n,a.g,i.l,x.a,y.f,C.a,n.e,y.a],styles:[".flex-container[_ngcontent-%COMP%]{background:url(travel.1c21e09476b296b811a4.png) no-repeat;background-size:cover;background-position:50%;padding:0;margin:0;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;-webkit-box-pack:center;justify-content:center;height:100vh;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.flex-item[_ngcontent-%COMP%]{background-color:#fff;height:auto;width:450px;min-width:200px;line-height:20px;font-weight:700;font-size:2em;text-align:center;margin:15px;display:inline-block;border-radius:0}.example-container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;flex-direction:column}.img1[_ngcontent-%COMP%]{background-position:50%;background-repeat:no-repeat;background-size:cover;height:100%}.mat-cell[_ngcontent-%COMP%]:last-child, .mat-header-cell[_ngcontent-%COMP%]:last-child{width:auto!important;padding-right:0!important}.logo[_ngcontent-%COMP%]{display:-webkit-box;display:flex;-webkit-box-pack:center;justify-content:center;-webkit-box-align:center;align-items:center}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.systeme[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;margin:25px 0 50px;line-height:30px}"]}),t})();const _=[{path:"",redirectTo:"",pathMatch:"full"},{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Jb({type:t,selectors:[["app-auth"]],decls:1,vars:0,template:function(t,e){1&t&&c.Qb(0,"router-outlet")},directives:[n.h],styles:[""]}),t})(),children:[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:V},{path:"create",component:F}]}];let D=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)},imports:[[n.g.forChild(_)],n.g]}),t})();var E=r("tk/3"),j=r("2thQ");r.d(e,"AuthModule",(function(){return I}));let I=(()=>{class t{}return t.\u0275mod=c.Nb({type:t}),t.\u0275inj=c.Mb({factory:function(e){return new(e||t)},imports:[[i.c,D,a.j,a.r,E.c,j.a]]}),t})()}}]);